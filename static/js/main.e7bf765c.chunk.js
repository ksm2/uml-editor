(this["webpackJsonpuml-editor"]=this["webpackJsonpuml-editor"]||[]).push([[0],{29:function(t,e,n){},31:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var a=n(2),i=n(5),r=n.n(i),s=n(20),c=n.n(s),o=(n(29),n(9)),h=n(0),u=n(1),l=function(){function t(e,n,a){Object(h.a)(this,t),this.red=void 0,this.green=void 0,this.blue=void 0,this.red=t.sanitizeComponent(e),this.green=t.sanitizeComponent(n),this.blue=t.sanitizeComponent(a)}return Object(u.a)(t,[{key:"toHexString",value:function(){return"#".concat(t.intToHex(this.red)).concat(t.intToHex(this.green)).concat(t.intToHex(this.blue))}},{key:"mix",value:function(e,n){var a=t.clamp(0,1,n),i=1-a;return new t(i*this.red+a*e.red,i*this.green+a*e.green,i*this.blue+a*e.blue)}}],[{key:"fromHexString",value:function(e){return new t(parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16))}},{key:"clamp",value:function(t,e,n){return n<t?t:n>e?e:n}},{key:"sanitizeComponent",value:function(e){var n=t.clamp(0,255,e);return Math.round(n)}},{key:"intToHex",value:function(t){return t.toString(16).padStart(2,"0")}}]),t}();l.CYAN=l.fromHexString("#0dcaf0"),l.WHITE=l.fromHexString("#ffffff"),l.DARK=l.fromHexString("#212529");var v,f=l,d=n(4),p=n(3),g=function(){function t(e){Object(h.a)(this,t),this.tokenizer=void 0,this.tokens=[],this.index=0,this.tokenizer=e}return Object(u.a)(t,[{key:"parseFromString",value:function(t){return this.index=0,this.tokens=this.tokenizer.tokenize(t),this.parse()}},{key:"consume",value:function(t){var e=this.tokens[this.index];if(e.kind===t)return this.index+=1,e;throw new Error("Expected ".concat(t,", but was ").concat(e.kind))}},{key:"parseOneOf",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var a=0,i=e;a<i.length;a++){var r=i[a],s=this.parseOptional(r);if(void 0!==s)return s}throw new Error("None of the one ofs matched")}},{key:"parseSet",value:function(t){for(var e=new Set;;){var n=this.index;try{e.add(t.call(this))}catch(a){return this.index=n,e}if(this.index<=n)throw new Error("Did not consume any tokens")}}},{key:"parseOptional",value:function(t){var e,n=this.index;try{e=t.call(this)}catch(a){return void(this.index=n)}if(this.index<=n)throw new Error("Did not consume any tokens");return e}}]),t}(),b=function(){function t(){Object(h.a)(this,t),this.subject="",this.index=0}return Object(u.a)(t,[{key:"tokenize",value:function(t){this.subject=t,this.index=0;for(var e=[];this.index<this.subject.length;){var n=this.index,a=this.next(),i=this.index;if(i<=n)throw new Error("Did not consume any characters");if(null!==a){var r=this.subject.slice(n,i);e.push({kind:a,value:r})}}return e}},{key:"matches",value:function(t){var e=this.subject.slice(this.index).match(t);return null!==e&&(this.index+=e[0].length,!0)}},{key:"startsWith",value:function(t){return!!this.subject.startsWith(t,this.index)&&(this.index+=t.length,!0)}}]),t}();!function(t){t[t.LBRACE=0]="LBRACE",t[t.RBRACE=1]="RBRACE",t[t.COLON=2]="COLON",t[t.SEMI=3]="SEMI",t[t.DOT=4]="DOT",t[t.HASH=5]="HASH",t[t.COLOR=6]="COLOR",t[t.NUMBER=7]="NUMBER",t[t.IDENTIFIER=8]="IDENTIFIER",t[t.ERROR=9]="ERROR"}(v||(v={}));var y,O=v,m=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"next",value:function(){return this.matches(/^\s+/)?null:this.matches(/^#[0-9a-fA-F]{6}|^#[0-9a-fA-F]{3}/)?O.COLOR:this.matches(/^\d+(\.\d*)?|^\.\d+/)?O.NUMBER:this.startsWith("{")?O.LBRACE:this.startsWith("}")?O.RBRACE:this.startsWith(":")?O.COLON:this.startsWith(";")?O.SEMI:this.startsWith(".")?O.DOT:this.startsWith("#")?O.HASH:this.matches(/^[a-zA-Z]+(-[a-zA-Z]+)*/)?O.IDENTIFIER:(this.matches(/^./),O.ERROR)}}]),n}(b),j=function t(e,n){Object(h.a)(this,t),this.key=void 0,this.value=void 0,this.key=e,this.value=n},k=n(6),T=n(21),E=n(8);y=Symbol.iterator;var S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;Object(h.a)(this,t),this.map=void 0,this.map=new Map(Object(E.a)(e).map((function(t){return[t.key,t.value]})))}return Object(u.a)(t,[{key:y,value:function(){return this.map.entries()}},{key:"addAll",value:function(t){var e,n=Object(k.a)(t);try{for(n.s();!(e=n.n()).done;){var a=Object(o.a)(e.value,2),i=a[0],r=a[1];this.map.set(i,r)}}catch(s){n.e(s)}finally{n.f()}return this}},{key:"getString",value:function(t,e){var n=this.map.get(t);return"string"===typeof n?n:e}},{key:"getColor",value:function(t,e){var n=this.map.get(t);return n instanceof f?n:e}},{key:"getFloat",value:function(t,e){var n=this.map.get(t);return"number"===typeof n?n:e}}]),t}(),x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;Object(h.a)(this,t),this.rules=void 0,this.rules=e}return Object(u.a)(t,[{key:"getProperties",value:function(t){var e,n=new S,a=Object(T.a)(t),i=a[0],r=a.slice(1),s=r.length>0,c=Object(k.a)(this.rules);try{for(c.s();!(e=c.n()).done;){var o=e.value;if(o.selector.tag===i){var h=new S(o.properties);s&&h.addAll(o.getProperties(r)),n.addAll(h)}}}catch(u){c.e(u)}finally{c.f()}return n}}]),t}(),w=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,a,i){var r;return Object(h.a)(this,n),(r=e.call(this,i)).selector=void 0,r.properties=void 0,r.selector=t,r.properties=a,r}return n}(x),C=function t(e,n,a){Object(h.a)(this,t),this.tag=void 0,this.classes=void 0,this.id=void 0,this.tag=e,this.classes=n,this.id=a},A=new(function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.call(this,new m)}return Object(u.a)(n,[{key:"parse",value:function(){return new x(this.parseRuleSet())}},{key:"parseRuleSet",value:function(){return this.parseSet(this.parseRule)}},{key:"parseRule",value:function(){var t=this.parseSelector();this.consume(O.LBRACE);var e=this.parsePropertySet(),n=this.parseRuleSet();return this.consume(O.RBRACE),new w(t,e,n)}},{key:"parseSelector",value:function(){var t=this.consume(O.IDENTIFIER),e=this.parseClassSet(),n=this.parseOptionalId();return new C(t.value,e,n)}},{key:"parsePropertySet",value:function(){return this.parseSet(this.parseProperty)}},{key:"parseProperty",value:function(){var t=this.parseIdentifier();this.consume(O.COLON);var e=this.parseOneOf(this.parseColor,this.parseNumber,this.parseIdentifier);return this.consume(O.SEMI),new j(t,e)}},{key:"parseClassSet",value:function(){return this.parseSet(this.parseClass)}},{key:"parseClass",value:function(){return this.consume(O.DOT),this.consume(O.IDENTIFIER).value}},{key:"parseOptionalId",value:function(){return this.parseOptional(this.parseId)}},{key:"parseId",value:function(){return this.consume(O.HASH),this.consume(O.IDENTIFIER).value}},{key:"parseColor",value:function(){var t=this.consume(O.COLOR);return f.fromHexString(t.value)}},{key:"parseNumber",value:function(){var t=this.consume(O.NUMBER);return parseFloat(t.value)}},{key:"parseIdentifier",value:function(){return this.consume(O.IDENTIFIER).value}}]),n}(g));var N=function(t){Object(i.useEffect)((function(){document.title=t}),[t])};var R,I,L=function(t){return Object(i.useRef)("".concat(t,"-").concat(Math.random().toString(36).substring(2))).current};(I=R||(R={}))[I.N=0]="N",I[I.NNE=1]="NNE",I[I.NE=2]="NE",I[I.ENE=3]="ENE",I[I.E=4]="E",I[I.ESE=5]="ESE",I[I.SE=6]="SE",I[I.SSE=7]="SSE",I[I.S=8]="S",I[I.SSW=9]="SSW",I[I.SW=10]="SW",I[I.WSW=11]="WSW",I[I.W=12]="W",I[I.WNW=13]="WNW",I[I.NW=14]="NW",I[I.NNW=15]="NNW";var D=R;function P(t){if((t+6)%16<5)return 0;if((t+14)%16<5)return 1;switch(t){case D.NNW:case D.SSW:return 1/4;case D.N:case D.S:return.5;case D.NNE:case D.SSE:return 3/4}throw new Error}function H(t){if((t+2)%16<5)return 0;if((t+10)%16<5)return 1;switch(t){case D.ENE:case D.WNW:return 1/4;case D.E:case D.W:return.5;case D.ESE:case D.WSW:return 3/4}throw new Error}var W,M=n(12),F=n.n(M);W=Symbol.iterator;var B,z=function(){function t(){Object(h.a)(this,t),this.children=new Set,this.hovered=!1,this.selected=!1}return Object(u.a)(t,[{key:"getChildren",value:function(){return Object(E.a)(this.children)}},{key:"addChild",value:function(t){return this.children.add(t),this}},{key:"deleteChild",value:function(t){return this.children.delete(t)}},{key:W,value:F.a.mark((function t(){var e,n,a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Object(k.a)(Object(E.a)(this.children).reverse()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=8;break}return a=n.value,t.delegateYield(a,"t0",6);case 6:t.next=3;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(1),e.e(t.t1);case 13:return t.prev=13,e.f(),t.finish(13);case 16:return t.next=18,this;case 18:case"end":return t.stop()}}),t,this,[[1,10,13,16]])}))},{key:"isHovered",value:function(){return this.hovered}},{key:"setHovered",value:function(t){this.hovered=t}},{key:"isSelected",value:function(){return this.selected}},{key:"setSelected",value:function(t){this.selected=t}}]),t}();!function(t){t[t.RECTANGLE=0]="RECTANGLE",t[t.ELLIPSE=1]="ELLIPSE",t[t.NOTE=2]="NOTE",t[t.FOLDER=3]="FOLDER",t[t.BOX=4]="BOX",t[t.FILE=5]="FILE",t[t.COMPONENT=6]="COMPONENT"}(B||(B={}));var X,Y=B,G=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,a,i,r,s){var c;return Object(h.a)(this,n),(c=e.call(this)).anchor=void 0,c.x=void 0,c.y=void 0,c.width=void 0,c.height=void 0,c.shape=Y.RECTANGLE,c.anchor=t,c.x=a,c.y=i,c.width=r,c.height=s,c}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Classifier"}},{key:"getRectangle",value:function(){return{x:this.getLeft(),y:this.getTop(),width:this.width,height:this.height}}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(t){this.width=t}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getHeight",value:function(){return this.height}},{key:"setHeight",value:function(t){this.height=t}},{key:"getLeft",value:function(){return this.x-this.width*P(this.anchor)}},{key:"setLeft",value:function(t){this.x=t+this.width*P(this.anchor)}},{key:"getCenterX",value:function(){return this.getLeft()+this.width/2}},{key:"getRight",value:function(){return this.getLeft()+this.width}},{key:"getTop",value:function(){return this.y-this.height*H(this.anchor)}},{key:"setTop",value:function(t){this.y=t+this.height*H(this.anchor)}},{key:"getCenterY",value:function(){return this.getTop()+this.height/2}},{key:"getBottom",value:function(){return this.getTop()+this.height}},{key:"render",value:function(t){t.renderClassifier(this)}}]),n}(z),_=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(t){t.renderDiagram(this)}},{key:"find",value:function(t){return this.findElement(this,t)}},{key:"findElement",value:function(t,e){if(e(t))return t;var n,a=Object(k.a)(t.getChildren());try{for(a.s();!(n=a.n()).done;){var i=n.value,r=this.findElement(i,e);if(void 0!==r)return r}}catch(s){a.e(s)}finally{a.f()}}},{key:"getWidth",value:function(){return this.getRight()-this.getLeft()}},{key:"getHeight",value:function(){return this.getBottom()-this.getTop()}},{key:"getTop",value:function(){return this.reduceClassifiers((function(t,e){var n=e.getTop();return t>n?n:t}),1/0)}},{key:"getBottom",value:function(){return this.reduceClassifiers((function(t,e){var n=e.getBottom();return t<n?n:t}),-1/0)}},{key:"getLeft",value:function(){return this.reduceClassifiers((function(t,e){var n=e.getLeft();return t>n?n:t}),1/0)}},{key:"getRight",value:function(){return this.reduceClassifiers((function(t,e){var n=e.getRight();return t<n?n:t}),-1/0)}},{key:"reduceClassifiers",value:function(t,e){var n,a=e,i=Object(k.a)(this.getChildren());try{for(i.s();!(n=i.n()).done;){var r=n.value;r instanceof G&&(a=t(a,r))}}catch(s){i.e(s)}finally{i.f()}return a===e?0:a}}]),n}(z);!function(t){t[t.SOLID=0]="SOLID",t[t.DOTS=1]="DOTS",t[t.SMALL_DASHES=2]="SMALL_DASHES",t[t.LARGE_DASHES=3]="LARGE_DASHES",t[t.TIGHT_DASHES=4]="TIGHT_DASHES"}(X||(X={}));var U,V=X;!function(t){t[t.NONE=0]="NONE",t[t.ARROW=1]="ARROW",t[t.TRIANGLE=2]="TRIANGLE",t[t.FILLED_TRIANGLE=3]="FILLED_TRIANGLE",t[t.DIAMOND=4]="DIAMOND",t[t.FILLED_DIAMOND=5]="FILLED_DIAMOND",t[t.CIRCLE=6]="CIRCLE",t[t.FILLED_CIRCLE=7]="FILLED_CIRCLE"}(U||(U={}));var K=U,$=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,a,i,r){var s;return Object(h.a)(this,n),(s=e.call(this)).from=void 0,s.fromAnchor=void 0,s.fromTip=K.NONE,s.to=void 0,s.toAnchor=void 0,s.toTip=K.NONE,s.linePattern=V.SOLID,s.from=t,s.fromAnchor=a,s.to=i,s.toAnchor=r,s}return Object(u.a)(n,[{key:"getX1",value:function(){return this.from.getLeft()+P(this.fromAnchor)*this.from.getWidth()}},{key:"getY1",value:function(){return this.from.getTop()+H(this.fromAnchor)*this.from.getHeight()}},{key:"getX2",value:function(){return this.to.getLeft()+P(this.toAnchor)*this.to.getWidth()}},{key:"getY2",value:function(){return this.to.getTop()+H(this.toAnchor)*this.to.getHeight()}},{key:"getAngle",value:function(){return Math.atan2(this.getY2()-this.getY1(),this.getX2()-this.getX1())}},{key:"render",value:function(t){t.renderRelationship(this)}}]),n}(z),Z=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(t){t.renderSeparator(this)}}]),n}(z),J=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(t){t.renderStereotype(this)}}]),n}(z),q=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this)).text=void 0,a.text=t,a}return Object(u.a)(n,[{key:"render",value:function(t){t.renderText(this)}}]),n}(z),Q=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(t){t.renderTitle(this)}}]),n}(q),tt=n(23),et=n(13),nt=function(){function t(){Object(h.a)(this,t),this.parser=void 0,this.serializer=void 0,this.elementMap=new Map,this.parser=new DOMParser,this.serializer=new XMLSerializer}return Object(u.a)(t,[{key:"deserialize",value:function(t){this.elementMap.clear();var e=this.parser.parseFromString(t,"text/xml"),n=this.parseElement(e.documentElement);return n instanceof _?n:new _}},{key:"serialize",value:function(t){if(this.hasElement(t)){var e=this.getElement(t);return this.serializer.serializeToString(e)}return""}},{key:"updateElement",value:function(t){if(this.hasElement(t)){var e=this.getElement(t);t instanceof G&&this.setClassifier(e,t)}}},{key:"parseElement",value:function(t){if(this.elementMap.has(t))return this.elementMap.get(t);var e=this.doParseElement(t);return this.elementMap.set(t,e),e}},{key:"doParseElement",value:function(t){switch(t.tagName){case"Diagram":return this.parseDiagram(t);case"Classifier":return this.parseClassifier(G,t);case"Relationship":return this.parseRelationship($,t);case"Title":return this.parseTitle(t);case"Method":case"Text":return this.parseText(t);case"Separator":return new Z;case"Stereotype":return new J}throw new Error("Unknown tag: ".concat(t.tagName))}},{key:"parseDiagram",value:function(t){var e=new _;return this.parseChildren(t,e),e}},{key:"parseClassifier",value:function(t,e){var n=new t(this.parseAnchorAttribute(e,"anchor"),this.parseIntAttribute(e,"x",0),this.parseIntAttribute(e,"y",0),this.parseIntAttribute(e,"width",200),this.parseIntAttribute(e,"height",120));return n.shape=this.parseEnumAttribute(Y,e,"shape",n.shape),this.parseChildren(e,n),n}},{key:"setClassifier",value:function(t,e){this.setIntAttribute(t,"x",0,e.getX()),this.setIntAttribute(t,"y",0,e.getY()),this.setIntAttribute(t,"width",200,e.getWidth()),this.setIntAttribute(t,"height",120,e.getHeight())}},{key:"parseRelationship",value:function(t,e){var n=new t(this.parseClassifierAttribute(e,"from"),this.parseAnchorAttribute(e,"fromAnchor"),this.parseClassifierAttribute(e,"to"),this.parseAnchorAttribute(e,"toAnchor"));return n.fromTip=this.parseTipAttribute(e,"fromTip",n.fromTip),n.toTip=this.parseTipAttribute(e,"toTip",n.toTip),n.linePattern=this.parseLinePatternAttribute(e,"linePattern",n.linePattern),n}},{key:"parseTitle",value:function(t){var e,n=null!==(e=t.textContent)&&void 0!==e?e:"";return new Q(n)}},{key:"parseText",value:function(t){var e,n=null!==(e=t.textContent)&&void 0!==e?e:"";return new q(n)}},{key:"parseChildren",value:function(t,e){var n,a=Object(k.a)(t.children);try{for(a.s();!(n=a.n()).done;){var i=n.value;try{e.addChild(this.parseElement(i))}catch(r){console.error(r)}}}catch(r){a.e(r)}finally{a.f()}}},{key:"parseClassifierAttribute",value:function(t,e){if(t.hasAttribute(e)){var n=t.getAttribute(e),a=t.ownerDocument.getElementById(n);if(null!==a){var i=this.parseElement(a);if(i instanceof G)return i}}throw new Error("Invalid classifier: <".concat(t.tagName," ").concat(e,'="').concat(t.getAttribute(e),'" />'))}},{key:"parseAnchorAttribute",value:function(t,e){return this.parseEnumAttribute(D,t,e,D.S)}},{key:"parseTipAttribute",value:function(t,e,n){return this.parseEnumAttribute(K,t,e,n)}},{key:"parseLinePatternAttribute",value:function(t,e,n){return this.parseEnumAttribute(V,t,e,n)}},{key:"parseEnumAttribute",value:function(t,e,n,a){if(e.hasAttribute(n)){var i=e.getAttribute(n),r=Reflect.get(t,i.toUpperCase());if(void 0!==r)return r}return a}},{key:"parseIntAttribute",value:function(t,e,n){if(t.hasAttribute(e)){var a=parseInt(t.getAttribute(e),10);if(!Number.isNaN(a))return a}return n}},{key:"setIntAttribute",value:function(t,e,n,a){a!==n?t.setAttribute(e,String(a)):t.removeAttribute(e)}},{key:"hasElement",value:function(t){var e,n=Object(k.a)(this.elementMap.values());try{for(n.s();!(e=n.n()).done;){if(e.value===t)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"getElement",value:function(t){var e,n=Object(k.a)(this.elementMap);try{for(n.s();!(e=n.n()).done;){var a=Object(o.a)(e.value,2),i=a[0];if(a[1]===t)return i}}catch(r){n.e(r)}finally{n.f()}}}]),t}(),at=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).toTip=K.DIAMOND,t}return n}($),it=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).linePattern=V.DOTS,t}return n}($),rt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return n}($),st=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Class"}}]),n}(G),ct=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).shape=Y.COMPONENT,t}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Component"}}]),n}(G),ot=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).toTip=K.FILLED_DIAMOND,t}return n}($),ht=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"getTagName",value:function(){return"DataType"}}]),n}(G),ut=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).toTip=K.ARROW,t.linePattern=V.TIGHT_DASHES,t}return n}($),lt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).toTip=K.ARROW,t}return n}($),vt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Enumeration"}}]),n}(G),ft=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).toTip=K.TRIANGLE,t}return n}($),dt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).toTip=K.TRIANGLE,t.linePattern=V.TIGHT_DASHES,t}return n}($),pt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Interface"}}]),n}(G),gt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).shape=Y.NOTE,t}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Note"}}]),n}(G),bt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).shape=Y.FOLDER,t}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Package"}}]),n}(G),yt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"getTagName",value:function(){return"Primitive"}}]),n}(G),Ot=new(function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"doParseElement",value:function(t){switch(t.tagName){case"Aggregation":return this.parseRelationship(at,t);case"Anchor":return this.parseRelationship(it,t);case"Association":return this.parseRelationship(rt,t);case"Class":return this.parseClassifier(st,t);case"Component":return this.parseClassifier(ct,t);case"Composition":return this.parseRelationship(ot,t);case"DataType":return this.parseClassifier(ht,t);case"Dependency":return this.parseRelationship(ut,t);case"DirectedAssociation":return this.parseRelationship(lt,t);case"Enumeration":return this.parseClassifier(vt,t);case"Generalization":return this.parseRelationship(ft,t);case"Implementation":return this.parseRelationship(dt,t);case"Interface":return this.parseClassifier(pt,t);case"Note":return this.parseClassifier(gt,t);case"Package":return this.parseClassifier(bt,t);case"Primitive":return this.parseClassifier(yt,t);default:return Object(tt.a)(Object(et.a)(n.prototype),"doParseElement",this).call(this,t)}}}]),n}(nt));n(31);var mt=function(t){var e=t.children;return Object(a.jsx)("div",{className:"container-fluid",children:e})},jt=n(11),kt=n.n(jt);var Tt=function(t){var e=t.onClick,n=t.children;return Object(a.jsx)("li",{children:Object(a.jsx)("button",{onClick:function(t){t.preventDefault(),null===e||void 0===e||e()},className:kt()("btn","btn-link","dropdown-item"),children:n})})};var Et=function(t){var e=t.labelledBy,n=t.children;return Object(a.jsx)("ul",{className:"dropdown-menu","aria-labelledby":e,children:n})},St=n(22);var xt=function(t){var e=t.id,n=t.className,r=t.children,s=Object(i.useRef)(null);return Object(a.jsx)("button",{id:e,ref:function(t){var e;null===t?(null===(e=s.current)||void 0===e||e.dispose(),s.current=null):s.current=new St.a(t)},"aria-expanded":"false","data-bs-toggle":"dropdown",className:kt()("btn","btn-link","dropdown-toggle",n),children:r})},wt=n(7),Ct=n.n(wt);n(32),n(33),n(34),n(35),n(36),n(38),n(39),n(40),n(41),n(42);function At(t,e){return(null===e||void 0===e?void 0:e())&&setTimeout((function(){t.state.completionActive||t.showHint({completeSingle:!1})}),100),Ct.a.Pass}function Nt(t){return At(t,(function(){var e=t.getCursor();return"<"===t.getRange(Ct.a.Pos(e.line,e.ch-1),e)}))}function Rt(t){return At(t,(function(){var e=t.getTokenAt(t.getCursor());return!!("string"!==e.type||/['"]/.test(e.string.charAt(e.string.length-1))&&1!==e.string.length)&&Ct.a.innerMode(t.getMode(),e.state).state.tagName}))}var It=function(t){var e=t.language,n=t.value,r=t.schema,s=t.onChange,c=Object(i.useRef)(s),o=Object(i.useRef)(null),h=Object(i.useRef)(null);return Object(i.useEffect)((function(){c.current=s}),[s]),Object(i.useEffect)((function(){var t="xml"===e?"xml":"text/x-scss",n={schemaInfo:r},a=Ct.a.fromTextArea(o.current,{mode:t,lineNumbers:!0,theme:"nord",matchTags:!0,autocorrect:!0,extraKeys:{"'<'":At,"'/'":Nt,"' '":Rt,"'='":Rt,"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment"},hintOptions:n});return h.current=a,function(){a.toTextArea()}}),[e,r]),Object(i.useEffect)((function(){function t(){var t,e=h.current.getValue();e!==n&&(null===(t=c.current)||void 0===t||t.call(c,e))}return h.current.setValue(n),h.current.on("change",t),function(){h.current.off("change",t)}}),[n]),Object(a.jsx)("textarea",{ref:o,defaultValue:n})},Lt=n.p+"static/media/logo.4da087a9.png";var Dt=function(t){var e=t.children;return Object(a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{gridArea:"menu"},children:Object(a.jsxs)(mt,{children:[Object(a.jsxs)("span",{className:"navbar-brand",children:[Object(a.jsx)("img",{alt:"Logo",src:Lt,height:32,width:32,className:"d-inline-block align-top"})," ","UML Editor"]}),Object(a.jsx)("ul",{className:"navbar-nav me-auto",children:e})]})})};var Pt=function(t){var e=t.active,n=void 0!==e&&e,i=t.title,r=t.children,s=L("Menu");return Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)(xt,{id:s,className:kt()("nav-link",{active:n}),children:i}),Object(a.jsx)(Et,{labelledBy:s,children:r})]})};n(43);var Ht=function(t){var e=t.title,n=t.onTitleChange;return Object(a.jsxs)(Tt,{onClick:function(){var t=window.prompt("New document title",e);null!==t&&n(t)},children:['Rename "',e,'" ...']})},Wt=10,Mt=4.5,Ft=function(){function t(e,n,a){Object(h.a)(this,t),this.renderer=void 0,this.context=void 0,this.canvas=void 0,this.renderer=e,this.context=n,this.canvas=a}return Object(u.a)(t,[{key:"renderClassifier",value:function(t){this.context.push(t.getTagName(),t.getWidth()-20,t.getHeight()-20),this.canvas.save(),this.canvas.translate(t.getLeft(),t.getTop()),this.applyStyle(t),this.drawShape(t),this.canvas.fill(),this.canvas.stroke(),this.canvas.clip(),this.canvas.translate(Wt,Wt);var e,n=Object(k.a)(t.getChildren());try{for(n.s();!(e=n.n()).done;){e.value.render(this.renderer)}}catch(a){n.e(a)}finally{n.f()}this.canvas.restore(),this.context.pop()}},{key:"isPointInClassifier",value:function(t,e,n){this.canvas.save(),this.canvas.translate(t.getLeft(),t.getTop()),this.drawShape(t);var a=this.canvas.isPointInPath(e,n);return this.canvas.restore(),a}},{key:"applyStyle",value:function(t){var e=this.context.getStyleProperties();this.canvas.lineWidth=e.getFloat("line-width",1.5),this.canvas.strokeStyle=e.getColor("stroke",f.DARK).toHexString();var n=e.getColor("fill",f.WHITE);t.isHovered()&&(n=n.mix(f.CYAN,.25)),this.canvas.fillStyle=n.toHexString()}},{key:"drawShape",value:function(t){switch(this.canvas.beginPath(),t.shape){case Y.RECTANGLE:return void this.drawRectangleShape(t);case Y.ELLIPSE:return void this.drawEllipseShape(t);case Y.FOLDER:return void this.drawFolderShape(t);case Y.NOTE:return void this.drawNoteShape(t);case Y.BOX:return void this.drawBoxShape(t);case Y.FILE:return void this.drawFileShape(t);case Y.COMPONENT:return void this.drawComponentShape(t)}}},{key:"drawBoxShape",value:function(t){var e=20,n=t.getWidth(),a=t.getHeight();this.canvas.rect(0,0,n,a),this.canvas.moveTo(0,0),this.canvas.lineTo(n,0),this.canvas.lineTo(n+e,-20),this.canvas.lineTo(e,-20),this.canvas.closePath(),this.canvas.moveTo(n,0),this.canvas.lineTo(n,a),this.canvas.lineTo(n+e,a-e),this.canvas.lineTo(n+e,-20),this.canvas.closePath()}},{key:"drawRectangleShape",value:function(t){this.canvas.rect(0,0,t.getWidth(),t.getHeight())}},{key:"drawEllipseShape",value:function(t){var e=t.getWidth(),n=t.getHeight();this.canvas.ellipse(e/2,n/2,e/2,n/2,0,0,2*Math.PI)}},{key:"drawFolderShape",value:function(t){this.canvas.rect(0,-20,80,20),this.canvas.rect(0,0,t.getWidth(),t.getHeight())}},{key:"drawNoteShape",value:function(t){var e=30,n=t.getWidth(),a=t.getHeight();this.canvas.moveTo(0,0),this.canvas.lineTo(0,a),this.canvas.lineTo(n-e,a),this.canvas.lineTo(n,a-e),this.canvas.lineTo(n,0),this.canvas.closePath(),this.canvas.moveTo(n-e,a),this.canvas.lineTo(n,a-e),this.canvas.lineTo(n-e,a-e),this.canvas.closePath()}},{key:"drawFileShape",value:function(t){var e=t.getWidth(),n=t.getHeight(),a=30;this.canvas.moveTo(a,0),this.canvas.lineTo(0,a),this.canvas.lineTo(0,n),this.canvas.lineTo(e,n),this.canvas.lineTo(e,0),this.canvas.closePath(),this.canvas.moveTo(a,0),this.canvas.lineTo(0,a),this.canvas.lineTo(a,a),this.canvas.closePath()}},{key:"drawComponentShape",value:function(t){var e=t.getWidth(),n=t.getHeight(),a=40,i=20,r=(n-60)/2;this.canvas.moveTo(0,0),this.canvas.lineTo(0,r),this.canvas.lineTo(20,r),this.canvas.lineTo(20,r+i),this.canvas.lineTo(0,r+i),this.canvas.lineTo(0,r+40),this.canvas.lineTo(20,r+40),this.canvas.lineTo(20,r+60),this.canvas.lineTo(0,r+60),this.canvas.lineTo(0,n),this.canvas.lineTo(e,n),this.canvas.lineTo(e,0),this.canvas.closePath(),this.canvas.rect(-20,r,a,i),this.canvas.rect(-20,r+40,a,i)}}]),t}(),Bt=function t(e,n,a){Object(h.a)(this,t),this.x=void 0,this.y=void 0,this.anchor=void 0,this.x=e,this.y=n,this.anchor=a},zt=function(){function t(e,n,a){Object(h.a)(this,t),this.width=void 0,this.height=void 0,this.context=void 0,this.style=void 0,this.width=[e],this.height=[n],this.context=[],this.style=a}return Object(u.a)(t,[{key:"push",value:function(t,e,n){this.context.unshift(t),this.width.unshift(null!==e&&void 0!==e?e:this.getWidth()),this.height.unshift(null!==n&&void 0!==n?n:this.getHeight())}},{key:"pop",value:function(){this.context.shift(),this.width.shift(),this.height.shift()}},{key:"getName",value:function(){return this.context[0]}},{key:"getWidth",value:function(){return this.width[0]}},{key:"getHeight",value:function(){return this.height[0]}},{key:"getStyleProperties",value:function(){return this.style.getProperties(Object(E.a)(this.context).reverse())}}]),t}(),Xt=function(){function t(e,n,a){Object(h.a)(this,t),this.context=void 0,this.canvas=void 0,this.classifierRenderer=void 0,this.translateX=void 0,this.translateY=void 0,this.context=new zt(e.width,e.height,n),this.translateX=a.translateX,this.translateY=a.translateY,this.canvas=e.getContext("2d"),this.classifierRenderer=new Ft(this,this.context,this.canvas)}return Object(u.a)(t,[{key:"renderDiagram",value:function(t){this.canvas.clearRect(0,0,this.context.getWidth(),this.context.getHeight()),this.canvas.save(),this.canvas.translate(this.translateX,this.translateY);var e,n=Object(k.a)(t.getChildren());try{for(n.s();!(e=n.n()).done;){e.value.render(this)}}catch(a){n.e(a)}finally{n.f()}this.renderHandles(t),this.canvas.restore()}},{key:"renderClassifier",value:function(t){this.classifierRenderer.renderClassifier(t)}},{key:"isPointInClassifier",value:function(t,e,n){return this.classifierRenderer.isPointInClassifier(t,e,n)}},{key:"renderRelationship",value:function(t){this.canvas.save(),this.canvas.beginPath(),this.canvas.moveTo(t.getX1(),t.getY1()),this.canvas.lineTo(t.getX2(),t.getY2()),this.applyRelationshipStyle(t),this.canvas.stroke(),this.drawFromTip(t),this.drawToTip(t),this.canvas.restore()}},{key:"applyRelationshipStyle",value:function(t){switch(this.canvas.lineWidth=1.5,this.canvas.strokeStyle="#212529",this.canvas.fillStyle="white",t.linePattern){case V.SOLID:this.canvas.setLineDash([]);break;case V.DOTS:this.canvas.setLineDash([2,2]);break;case V.SMALL_DASHES:this.canvas.setLineDash([5,5]);break;case V.LARGE_DASHES:this.canvas.setLineDash([10,10]);break;case V.TIGHT_DASHES:this.canvas.setLineDash([15,5])}}},{key:"drawFromTip",value:function(t){t.fromTip!==K.NONE&&(this.canvas.save(),this.canvas.setLineDash([]),this.canvas.translate(t.getX1(),t.getY1()),this.canvas.rotate(t.getAngle()+Math.PI),this.drawTip(t.fromTip),this.canvas.restore())}},{key:"drawToTip",value:function(t){t.toTip!==K.NONE&&(this.canvas.save(),this.canvas.setLineDash([]),this.canvas.translate(t.getX2(),t.getY2()),this.canvas.rotate(t.getAngle()),this.drawTip(t.toTip),this.canvas.restore())}},{key:"renderText",value:function(t){this.context.push("Text"),this.drawText(t.text,"1.25rem","left"),this.canvas.translate(0,20),this.context.pop()}},{key:"renderTitle",value:function(t){this.context.push("Title"),this.drawText(t.text,"1.25rem","center"),this.canvas.translate(0,20),this.context.pop()}},{key:"renderSeparator",value:function(t){this.canvas.save(),this.canvas.beginPath(),this.canvas.moveTo(-10,Wt),this.canvas.lineTo(this.context.getWidth()+Wt,Wt),this.canvas.lineWidth=1.5,this.canvas.strokeStyle="#212529",this.canvas.stroke(),this.canvas.restore(),this.canvas.translate(0,20)}},{key:"renderStereotype",value:function(t){var e=this.context.getName();this.context.push("Stereotype"),this.drawText("\xab".concat(e,"\xbb"),"1rem","center"),this.canvas.translate(0,20),this.context.pop()}},{key:"drawText",value:function(t,e,n){var a=this.context.getStyleProperties(),i=a.getString("font-weight","normal"),r=a.getString("font-style","normal");this.canvas.save(),this.canvas.beginPath(),this.canvas.font="".concat(r," ").concat(i," ").concat(e," system-ui"),this.canvas.fillStyle=a.getColor("color",f.DARK).toHexString();var s=this.canvas.measureText(t),c="center"===n?(this.context.getWidth()-s.width)/2:0;this.canvas.fillText(t,c,s.fontBoundingBoxAscent-3),this.canvas.restore()}},{key:"drawTip",value:function(t){switch(t){case K.ARROW:this.drawArrow();break;case K.TRIANGLE:this.drawTriangle();break;case K.FILLED_TRIANGLE:this.canvas.fillStyle=this.canvas.strokeStyle,this.drawTriangle();break;case K.DIAMOND:this.drawDiamond();break;case K.FILLED_DIAMOND:this.canvas.fillStyle=this.canvas.strokeStyle,this.drawDiamond();break;case K.CIRCLE:this.drawCircle();break;case K.FILLED_CIRCLE:this.canvas.fillStyle=this.canvas.strokeStyle,this.drawCircle()}}},{key:"drawArrow",value:function(){this.canvas.beginPath(),this.canvas.moveTo(0,0),this.canvas.lineTo(-20,8),this.canvas.moveTo(0,0),this.canvas.lineTo(-20,-8),this.canvas.closePath(),this.canvas.stroke()}},{key:"drawTriangle",value:function(){this.canvas.beginPath(),this.canvas.moveTo(0,0),this.canvas.lineTo(-20,10),this.canvas.lineTo(-20,-10),this.canvas.closePath(),this.canvas.fill(),this.canvas.stroke()}},{key:"drawDiamond",value:function(){this.canvas.beginPath(),this.canvas.moveTo(0,0),this.canvas.lineTo(-15,8),this.canvas.lineTo(-30,0),this.canvas.lineTo(-15,-8),this.canvas.closePath(),this.canvas.fill(),this.canvas.stroke()}},{key:"drawCircle",value:function(){this.canvas.beginPath(),this.canvas.ellipse(-10,0,10,10,0,0,2*Math.PI),this.canvas.closePath(),this.canvas.fill(),this.canvas.stroke()}},{key:"renderHandles",value:function(t){this.canvas.save(),this.canvas.fillStyle="white",this.canvas.strokeStyle="black",this.canvas.lineWidth=1;var e,n=Object(k.a)(this.getHandles(t));try{for(n.s();!(e=n.n()).done;){var a=e.value,i=a.x,r=a.y;this.renderHandleAtPoint(i,r)}}catch(s){n.e(s)}finally{n.f()}this.canvas.restore()}},{key:"getHandles",value:F.a.mark((function t(e){var n,a,i;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(k.a)(e.getChildren()),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=9;break}if(!((i=a.value)instanceof G&&i.isSelected())){t.next=7;break}return t.delegateYield(this.getClassifierHandles(i),"t0",7);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(1),n.e(t.t1);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"renderHandleAtPoint",value:function(t,e){this.canvas.beginPath(),this.canvas.rect(t-Mt,e-Mt,9,9),this.canvas.fill(),this.canvas.stroke()}},{key:"findHandleForPoint",value:function(t,e,n){var a,i=Object(k.a)(this.getHandles(t));try{for(i.s();!(a=i.n()).done;){var r=a.value;if(this.isPointInHandle(r,e,n))return r}}catch(s){i.e(s)}finally{i.f()}}},{key:"isPointInHandle",value:function(t,e,n){return Math.abs(e-t.x)<=Mt&&Math.abs(n-t.y)<=Mt}},{key:"getClassifierHandles",value:F.a.mark((function t(e){var n,a,i,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getLeft(),a=e.getRight(),i=e.getTop(),r=e.getBottom(),t.next=6,new Bt(n,i,D.NW);case 6:return t.next=8,new Bt(e.getCenterX(),i,D.N);case 8:return t.next=10,new Bt(a,i,D.NE);case 10:return t.next=12,new Bt(n,e.getCenterY(),D.W);case 12:return t.next=14,new Bt(a,e.getCenterY(),D.E);case 14:return t.next=16,new Bt(n,r,D.SW);case 16:return t.next=18,new Bt(e.getCenterX(),r,D.S);case 18:return t.next=20,new Bt(a,r,D.SE);case 20:case"end":return t.stop()}}),t)}))}]),t}();function Yt(t){var e=t.clientX,n=t.clientY,a=t.currentTarget.getBoundingClientRect();return{x:e-a.x-a.width/2,y:n-a.y-a.height/2}}var Gt=function(t){var e=t.title,n=t.diagram,i=t.style;return Object(a.jsx)(Tt,{onClick:function(){var t=document.createElement("canvas");t.width=n.getWidth()+20,t.height=n.getHeight()+20,new Xt(t,i,{translateX:10-n.getLeft(),translateY:10-n.getTop()}).renderDiagram(n);var a=t.toDataURL("image/png"),r=document.createElement("a");r.download="".concat(e.replace(/[^a-zA-Z_-]+/g,"-"),".png"),r.href=a,r.click()},children:"As PNG"})};var _t=function(t){var e=t.title,n=t.diagram,i=t.style,r=t.onTitleChange;return Object(a.jsxs)(Dt,{children:[Object(a.jsx)(Pt,{title:"File",children:Object(a.jsx)(Ht,{title:e,onTitleChange:r})}),Object(a.jsx)(Pt,{title:"Export",children:Object(a.jsx)(Gt,{title:e,diagram:n,style:i})})]})};function Ut(t,e){return new Xt(t,e,{translateX:t.width/2,translateY:t.height/2})}var Vt=function(t){var e=t.diagram,n=t.style,r=t.onChange,s=Object(i.useRef)(null),c=Object(i.useRef)(null),o=Object(i.useRef)(null),h=Object(i.useRef)(null),u=Object(i.useRef)(null);function l(t){c.current.style.cursor=t}function v(t,n){var a,i,s,c,l=e.find((function(t){return t.isSelected()}));if(l instanceof G){var v=(s={x:t,y:n},c=o.current,a={x:s.x-c.x,y:s.y-c.y},i=20,{x:Math.round(a.x/i)*i,y:Math.round(a.y/i)*i}),f=v.x,d=v.y;if(u.current===l)return l.setLeft(h.current.x+f),l.setTop(h.current.y+d),void(null===r||void 0===r||r(l));u.current instanceof Bt&&function(t,e,n,a){e.anchor!==D.W&&e.anchor!==D.NW&&e.anchor!==D.SW||(t.setWidth(h.current.width-n),t.setLeft(h.current.x+n),null===r||void 0===r||r(t)),e.anchor!==D.E&&e.anchor!==D.NE&&e.anchor!==D.SE||(t.setWidth(h.current.width+n),t.setLeft(h.current.x),null===r||void 0===r||r(t)),e.anchor!==D.N&&e.anchor!==D.NW&&e.anchor!==D.NE||(t.setHeight(h.current.height-a),t.setTop(h.current.y+a),null===r||void 0===r||r(t)),e.anchor!==D.S&&e.anchor!==D.SW&&e.anchor!==D.SE||(t.setHeight(h.current.height+a),t.setTop(h.current.y),null===r||void 0===r||r(t))}(l,u.current,f,d)}}return Object(i.useEffect)((function(){function t(){var t=s.current.getBoundingClientRect();c.current.width=Math.trunc(t.width),c.current.height=Math.trunc(t.height),Ut(c.current,n).renderDiagram(e)}return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}}),[e,n]),Object(a.jsx)("div",{ref:s,className:"Canvas",style:{backgroundColor:"hsl(220 9% 92% / 1)",gridArea:"canvas"},children:Object(a.jsx)("canvas",{ref:c,onMouseMove:function(t){var a=Ut(c.current,n),i=Yt(t),r=i.x,s=i.y;if(1&t.buttons)return v(r,s),void a.renderDiagram(e);var o,h=Object(k.a)(e);try{for(h.s();!(o=h.n()).done;){o.value.setHovered(!1)}}catch(g){h.e(g)}finally{h.f()}var u=a.findHandleForPoint(e,r,s);if(void 0!==u)l("".concat(D[u.anchor].toLowerCase(),"-resize"));else{l("default");var f,d=Object(k.a)(e);try{for(d.s();!(f=d.n()).done;){var p=f.value;if(p instanceof G)if(a.isPointInClassifier(p,r,s)){p.setHovered(!0);break}}}catch(g){d.e(g)}finally{d.f()}}a.renderDiagram(e)},onMouseDown:function(t){var a=Ut(c.current,n),i=Yt(t);!function(t,n,a){var i=e.find((function(t){return t.isSelected()})),r=t.findHandleForPoint(e,n,a);if(void 0!==r&&i instanceof G)return h.current=i.getRectangle(),o.current={x:n,y:a},void(u.current=r);null===i||void 0===i||i.setSelected(!1);var s,c=Object(k.a)(e);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l instanceof G&&t.isPointInClassifier(l,n,a))return l.setSelected(!0),h.current=l.getRectangle(),o.current={x:n,y:a},void(u.current=l)}}catch(v){c.e(v)}finally{c.f()}}(a,i.x,i.y),a.renderDiagram(e)},onMouseUp:function(){h.current=null,o.current=null,u.current=null}})})};var Kt=function(t){var e=t.css,n=t.onChange;return Object(a.jsx)("div",{className:"CSSEditor",style:{gridArea:"css",position:"relative"},children:Object(a.jsx)(It,{language:"css",value:e,onChange:n})})},$t=n(19),Zt=Object.keys(D).filter((function(t){return t.match(/^\D+$/)})).map((function(t){return t.toLowerCase()})),Jt=Object.keys(Y).filter((function(t){return t.match(/^\D+$/)})).map((function(t){return t.toLowerCase()})),qt=Object.keys(K).filter((function(t){return t.match(/^\D+$/)})).map((function(t){return t.toLowerCase()})),Qt={children:["Title","Separator","Method","Stereotype"],attrs:{x:null,y:null,width:null,height:null,anchor:Zt,shape:Jt}},te={attrs:{from:null,fromTip:qt,to:null,toTip:qt,linePattern:Object.keys(V).filter((function(t){return t.match(/^\D+$/)})).map((function(t){return t.toLowerCase()}))}},ee={Class:Qt,Classifier:Qt,Component:Qt,DataType:Qt,Enumeration:Qt,Interface:Qt,Note:Qt,Object:Qt,Package:Qt,Primitive:Qt},ne={Aggregation:te,Anchor:te,Association:te,Composition:te,Dependency:te,DirectedAssociation:te,Generalization:te,Implementation:te,Relationship:te},ae=Object($t.a)(Object($t.a)({"!top":["Diagram"],"!attrs":{id:null,class:null},Diagram:{children:[].concat(Object(E.a)(Object.keys(ee)),Object(E.a)(Object.keys(ne)))}},ee),ne);var ie=function(t){var e=t.xml,n=t.onChange;return Object(a.jsx)("div",{className:"XMLEditor",style:{gridArea:"xml",position:"relative"},children:Object(a.jsx)(It,{language:"xml",value:e,schema:ae,onChange:n})})};var re=function(){var t=Object(i.useState)((function(){return new _})),e=Object(o.a)(t,2),n=e[0],r=e[1],s=Object(i.useState)((function(){return new x})),c=Object(o.a)(s,2),h=c[0],u=c[1],l=Object(i.useState)("Untitled"),v=Object(o.a)(l,2),f=v[0],d=v[1],p=Object(i.useState)(""),g=Object(o.a)(p,2),b=g[0],y=g[1],O=Object(i.useState)(""),m=Object(o.a)(O,2),j=m[0],k=m[1];return N("".concat(f," - UML Editor")),Object(i.useEffect)((function(){var t='<Diagram>\n  <Interface id="i1" anchor="s" x="0" y="-50">\n    <Stereotype/>\n    <Title>Visitor</Title>\n  </Interface>\n\n  <Class id="c1" anchor="n" x="0" y="50" width="400">\n    <Stereotype/>\n    <Title>Concrete Visitor</Title>\n    <Separator/>\n    <Method>visitSomething(something: Something)</Method>\n  </Class>\n\n  <Implementation from="c1" to="i1" fromAnchor="n" toAnchor="s"/>\n</Diagram>\n',e="Interface {\n  Title {\n    font-style: italic;\n  }\n}\n\nClass {\n  Title {\n    font-weight: bold;\n  }\n}\n",n=Ot.deserialize(t),a=A.parseFromString(e);r(n),u(a),y(t),k(e)}),[]),Object(a.jsxs)("div",{className:"App bg-secondary",children:[Object(a.jsx)(_t,{title:f,diagram:n,style:h,onTitleChange:d}),Object(a.jsx)(ie,{xml:b,onChange:function(t){var e=Ot.deserialize(t);r(e)}}),Object(a.jsx)(Kt,{css:j,onChange:function(t){var e=A.parseFromString(t);u(e)}}),Object(a.jsx)(Vt,{diagram:n,style:h,onChange:function(t){Ot.updateElement(t);var e=Ot.serialize(n);y(e)}})]})},se=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),r(t),s(t)}))};n(44);c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(re,{})}),document.getElementById("root")),se()}},[[45,1,2]]]);
//# sourceMappingURL=main.e7bf765c.chunk.js.map