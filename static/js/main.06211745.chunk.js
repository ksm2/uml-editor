(this["webpackJsonpuml-editor"]=this["webpackJsonpuml-editor"]||[]).push([[0],{30:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(5),i=n.n(r),s=n(20),c=n.n(s),o=(n(30),n(7)),u=20,h=10,l=4.5,v='<Diagram>\n  <Interface id="i1" anchor="s" y="-60">\n    <Stereotype/>\n    <Title>Visitor</Title>\n  </Interface>\n\n  <Class id="c1" anchor="n" y="60" width="400">\n    <Stereotype/>\n    <Title>Concrete Visitor</Title>\n    <Separator/>\n    <Method>visitSomething(something: Something)</Method>\n  </Class>\n\n  <Implementation from="c1" to="i1" fromAnchor="n" toAnchor="s"/>\n</Diagram>\n',f="Interface {\n  Title {\n    font-style: italic;\n  }\n}\n\nClass {\n  Title {\n    font-weight: bold;\n  }\n}\n",d=n(1),g=n(2),p=function(){function e(t,n,a){Object(d.a)(this,e),this.red=void 0,this.green=void 0,this.blue=void 0,this.red=e.sanitizeComponent(t),this.green=e.sanitizeComponent(n),this.blue=e.sanitizeComponent(a)}return Object(g.a)(e,[{key:"toHexString",value:function(){return"#".concat(e.intToHex(this.red)).concat(e.intToHex(this.green)).concat(e.intToHex(this.blue))}},{key:"mix",value:function(t,n){var a=e.clamp(0,1,n),r=1-a;return new e(r*this.red+a*t.red,r*this.green+a*t.green,r*this.blue+a*t.blue)}}],[{key:"fromHexString",value:function(t){return new e(parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16))}},{key:"clamp",value:function(e,t,n){return n<e?e:n>t?t:n}},{key:"sanitizeComponent",value:function(t){var n=e.clamp(0,255,t);return Math.round(n)}},{key:"intToHex",value:function(e){return e.toString(16).padStart(2,"0")}}]),e}();p.BLUE=p.fromHexString("#0d6efd"),p.INDIGO=p.fromHexString("#6610f2"),p.PURPLE=p.fromHexString("#6f42c1"),p.PINK=p.fromHexString("#d63384"),p.RED=p.fromHexString("#dc3545"),p.ORANGE=p.fromHexString("#fd7e14"),p.YELLOW=p.fromHexString("#ffc107"),p.GREEN=p.fromHexString("#198754"),p.TEAL=p.fromHexString("#20c997"),p.CYAN=p.fromHexString("#0dcaf0"),p.WHITE=p.fromHexString("#ffffff"),p.GRAY=p.fromHexString("#6c757d"),p.GRAY_DARK=p.fromHexString("#343a40"),p.PRIMARY=p.fromHexString("#0d6efd"),p.SECONDARY=p.fromHexString("#6c757d"),p.SUCCESS=p.fromHexString("#198754"),p.INFO=p.CYAN,p.WARNING=p.YELLOW,p.DANGER=p.RED,p.LIGHT=p.fromHexString("#f8f9fa"),p.DARK=p.fromHexString("#212529");var b,O=p,y=n(4),m=n(3),j=function(){function e(t){Object(d.a)(this,e),this.tokenizer=void 0,this.tokens=[],this.index=0,this.tokenizer=t}return Object(g.a)(e,[{key:"parseFromString",value:function(e){return this.index=0,this.tokens=this.tokenizer.tokenize(e),this.parse()}},{key:"consume",value:function(e){var t=this.tokens[this.index];if(t.kind===e)return this.index+=1,t;throw new Error("Expected ".concat(e,", but was ").concat(t.kind))}},{key:"parseOneOf",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a=0,r=t;a<r.length;a++){var i=r[a],s=this.parseOptional(i);if(void 0!==s)return s}throw new Error("None of the one ofs matched")}},{key:"parseSet",value:function(e){for(var t=new Set;;){var n=this.index;try{t.add(e.call(this))}catch(a){return this.index=n,t}if(this.index<=n)throw new Error("Did not consume any tokens")}}},{key:"parseOptional",value:function(e){var t,n=this.index;try{t=e.call(this)}catch(a){return void(this.index=n)}if(this.index<=n)throw new Error("Did not consume any tokens");return t}}]),e}(),k=function(){function e(){Object(d.a)(this,e),this.subject="",this.index=0}return Object(g.a)(e,[{key:"tokenize",value:function(e){this.subject=e,this.index=0;for(var t=[];this.index<this.subject.length;){var n=this.index,a=this.next(),r=this.index;if(r<=n)throw new Error("Did not consume any characters");if(null!==a){var i=this.subject.slice(n,r);t.push({kind:a,value:i})}}return t}},{key:"matches",value:function(e){var t=this.subject.slice(this.index).match(e);return null!==t&&(this.index+=t[0].length,!0)}},{key:"startsWith",value:function(e){return!!this.subject.startsWith(e,this.index)&&(this.index+=e.length,!0)}}]),e}();!function(e){e[e.LBRACE=0]="LBRACE",e[e.RBRACE=1]="RBRACE",e[e.COLON=2]="COLON",e[e.SEMI=3]="SEMI",e[e.DOT=4]="DOT",e[e.HASH=5]="HASH",e[e.COLOR=6]="COLOR",e[e.NUMBER=7]="NUMBER",e[e.IDENTIFIER=8]="IDENTIFIER",e[e.ERROR=9]="ERROR"}(b||(b={}));var x,E=b,S=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"next",value:function(){return this.matches(/^\s+/)||this.matches(/^\/\/[^\r\n]*/)||this.matches(/^\/\*.*?\*\//)?null:this.matches(/^#[0-9a-fA-F]{6}|^#[0-9a-fA-F]{3}/)?E.COLOR:this.matches(/^\d+(\.\d*)?|^\.\d+/)?E.NUMBER:this.startsWith("{")?E.LBRACE:this.startsWith("}")?E.RBRACE:this.startsWith(":")?E.COLON:this.startsWith(";")?E.SEMI:this.startsWith(".")?E.DOT:this.startsWith("#")?E.HASH:this.matches(/^[a-zA-Z]+(-[a-zA-Z]+)*/)?E.IDENTIFIER:(this.matches(/^./),E.ERROR)}}]),n}(k),w=function e(t,n){Object(d.a)(this,e),this.key=void 0,this.value=void 0,this.key=t,this.value=n},T=n(6),C=n(21),A=n(9);x=Symbol.iterator;var N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;Object(d.a)(this,e),this.map=void 0,this.map=new Map(Object(A.a)(t).map((function(e){return[e.key,e.value]})))}return Object(g.a)(e,[{key:x,value:function(){return this.map.entries()}},{key:"addAll",value:function(e){var t,n=Object(T.a)(e);try{for(n.s();!(t=n.n()).done;){var a=Object(o.a)(t.value,2),r=a[0],i=a[1];this.map.set(r,i)}}catch(s){n.e(s)}finally{n.f()}return this}},{key:"getString",value:function(e,t){var n=this.map.get(e);return"string"===typeof n?n:t}},{key:"getColor",value:function(e,t){var n=this.map.get(e);return n instanceof O?n:t}},{key:"getFloat",value:function(e,t){var n=this.map.get(e);return"number"===typeof n?n:t}}]),e}(),R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;Object(d.a)(this,e),this.rules=void 0,this.rules=t}return Object(g.a)(e,[{key:"getProperties",value:function(e){var t,n=new N,a=Object(C.a)(e),r=a[0],i=a.slice(1),s=i.length>0,c=Object(T.a)(this.rules);try{for(c.s();!(t=c.n()).done;){var o=t.value;if(o.selector.tag===r){var u=new N(o.properties);s&&(u.addAll(this.getProperties(i)),u.addAll(o.getProperties(i))),n.addAll(u)}}}catch(h){c.e(h)}finally{c.f()}return n}}]),e}(),I=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(e,a,r){var i;return Object(d.a)(this,n),(i=t.call(this,r)).selector=void 0,i.properties=void 0,i.selector=e,i.properties=a,i}return n}(R),L=function e(t,n,a){Object(d.a)(this,e),this.tag=void 0,this.classes=void 0,this.id=void 0,this.tag=t,this.classes=n,this.id=a},D=new(function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.call(this,new S)}return Object(g.a)(n,[{key:"parse",value:function(){return new R(this.parseRuleSet())}},{key:"parseRuleSet",value:function(){return this.parseSet(this.parseRule)}},{key:"parseRule",value:function(){var e=this.parseSelector();this.consume(E.LBRACE);var t=this.parsePropertySet(),n=this.parseRuleSet();return this.consume(E.RBRACE),new I(e,t,n)}},{key:"parseSelector",value:function(){var e=this.consume(E.IDENTIFIER),t=this.parseClassSet(),n=this.parseOptionalId();return new L(e.value,t,n)}},{key:"parsePropertySet",value:function(){return this.parseSet(this.parseProperty)}},{key:"parseProperty",value:function(){var e=this.parseIdentifier();this.consume(E.COLON);var t=this.parseOneOf(this.parseColor,this.parseNumber,this.parseIdentifierValue);return this.consume(E.SEMI),new w(e,t)}},{key:"parseClassSet",value:function(){return this.parseSet(this.parseClass)}},{key:"parseClass",value:function(){return this.consume(E.DOT),this.consume(E.IDENTIFIER).value}},{key:"parseOptionalId",value:function(){return this.parseOptional(this.parseId)}},{key:"parseId",value:function(){return this.consume(E.HASH),this.consume(E.IDENTIFIER).value}},{key:"parseColor",value:function(){var e=this.consume(E.COLOR);return O.fromHexString(e.value)}},{key:"parseNumber",value:function(){var e=this.consume(E.NUMBER);return parseFloat(e.value)}},{key:"parseIdentifierValue",value:function(){var e=this.parseIdentifier();switch(e){case"blue":return O.BLUE;case"indigo":return O.INDIGO;case"purple":return O.PURPLE;case"pink":return O.PINK;case"red":return O.RED;case"orange":return O.ORANGE;case"yellow":return O.YELLOW;case"green":return O.GREEN;case"teal":return O.TEAL;case"cyan":return O.CYAN;case"white":return O.WHITE;case"gray":return O.GRAY;case"gray-dark":return O.GRAY_DARK;case"primary":return O.PRIMARY;case"secondary":return O.SECONDARY;case"success":return O.SUCCESS;case"info":return O.INFO;case"warning":return O.WARNING;case"danger":return O.DANGER;case"light":return O.LIGHT;case"dark":return O.DARK;default:return e}}},{key:"parseIdentifier",value:function(){return this.consume(E.IDENTIFIER).value}}]),n}(j));var H=function(e){Object(r.useEffect)((function(){document.title=e}),[e])};var P=function(e){return Object(r.useRef)("".concat(e,"-").concat(Math.random().toString(36).substring(2))).current};var W,M,F=function(e,t){var n=Object(r.useRef)(t);Object(r.useEffect)((function(){function t(t){void 0!==e&&function(e,t){var n,a=!0,r=e.split("-"),i=Object(T.a)(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;a="Ctrl"===s?a&&t.ctrlKey:"Shift"===s?a&&t.shiftKey:"Alt"===s?a&&t.altKey:a&&t.key.toLowerCase()===s.toLowerCase()}}catch(c){i.e(c)}finally{i.f()}return a}(e,t)&&(t.preventDefault(),n.current())}return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]),Object(r.useEffect)((function(){n.current=t}))};(M=W||(W={}))[M.N=0]="N",M[M.NNE=1]="NNE",M[M.NE=2]="NE",M[M.ENE=3]="ENE",M[M.E=4]="E",M[M.ESE=5]="ESE",M[M.SE=6]="SE",M[M.SSE=7]="SSE",M[M.S=8]="S",M[M.SSW=9]="SSW",M[M.SW=10]="SW",M[M.WSW=11]="WSW",M[M.W=12]="W",M[M.WNW=13]="WNW",M[M.NW=14]="NW",M[M.NNW=15]="NNW";var G=W;function Y(e){if((e+6)%16<5)return 0;if((e+14)%16<5)return 1;switch(e){case G.NNW:case G.SSW:return 1/4;case G.N:case G.S:return.5;case G.NNE:case G.SSE:return 3/4}throw new Error}function B(e){if((e+2)%16<5)return 0;if((e+10)%16<5)return 1;switch(e){case G.ENE:case G.WNW:return 1/4;case G.E:case G.W:return.5;case G.ESE:case G.WSW:return 3/4}throw new Error}var X,z=n(13),_=n.n(z);X=Symbol.iterator;var U,K=function(){function e(){Object(d.a)(this,e),this.children=new Set,this.hovered=!1,this.selected=!1}return Object(g.a)(e,[{key:"getChildren",value:function(){return Object(A.a)(this.children)}},{key:"addChild",value:function(e){return this.children.add(e),this}},{key:"deleteChild",value:function(e){return this.children.delete(e)}},{key:X,value:_.a.mark((function e(){var t,n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(T.a)(Object(A.a)(this.children).reverse()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=8;break}return a=n.value,e.delegateYield(a,"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),t.e(e.t1);case 13:return e.prev=13,t.f(),e.finish(13);case 16:return e.next=18,this;case 18:case"end":return e.stop()}}),e,this,[[1,10,13,16]])}))},{key:"isHovered",value:function(){return this.hovered}},{key:"setHovered",value:function(e){this.hovered=e}},{key:"isSelected",value:function(){return this.selected}},{key:"setSelected",value:function(e){this.selected=e}}]),e}();!function(e){e[e.RECTANGLE=0]="RECTANGLE",e[e.ELLIPSE=1]="ELLIPSE",e[e.NOTE=2]="NOTE",e[e.FOLDER=3]="FOLDER",e[e.BOX=4]="BOX",e[e.FILE=5]="FILE",e[e.COMPONENT=6]="COMPONENT"}(U||(U={}));var V,$=U,Z=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(e,a,r,i,s){var c;return Object(d.a)(this,n),(c=t.call(this)).anchor=void 0,c.x=void 0,c.y=void 0,c.width=void 0,c.height=void 0,c.shape=$.RECTANGLE,c.anchor=e,c.x=a,c.y=r,c.width=i,c.height=s,c}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Classifier"}},{key:"getRectangle",value:function(){return{x:this.getLeft(),y:this.getTop(),width:this.width,height:this.height}}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(e){this.width=e}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getHeight",value:function(){return this.height}},{key:"setHeight",value:function(e){this.height=e}},{key:"getLeft",value:function(){return this.x-this.width*Y(this.anchor)}},{key:"setLeft",value:function(e){this.x=e+this.width*Y(this.anchor)}},{key:"getCenterX",value:function(){return this.getLeft()+this.width/2}},{key:"getRight",value:function(){return this.getLeft()+this.width}},{key:"getTop",value:function(){return this.y-this.height*B(this.anchor)}},{key:"setTop",value:function(e){this.y=e+this.height*B(this.anchor)}},{key:"getCenterY",value:function(){return this.getTop()+this.height/2}},{key:"getBottom",value:function(){return this.getTop()+this.height}},{key:"render",value:function(e){e.renderClassifier(this)}}]),n}(K),J=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(e){e.renderDiagram(this)}},{key:"find",value:function(e){return this.findElement(this,e)}},{key:"findElement",value:function(e,t){if(t(e))return e;var n,a=Object(T.a)(e.getChildren());try{for(a.s();!(n=a.n()).done;){var r=n.value,i=this.findElement(r,t);if(void 0!==i)return i}}catch(s){a.e(s)}finally{a.f()}}},{key:"getWidth",value:function(){return this.getRight()-this.getLeft()}},{key:"getHeight",value:function(){return this.getBottom()-this.getTop()}},{key:"getTop",value:function(){return this.reduceClassifiers((function(e,t){var n=t.getTop();return e>n?n:e}),1/0)}},{key:"getBottom",value:function(){return this.reduceClassifiers((function(e,t){var n=t.getBottom();return e<n?n:e}),-1/0)}},{key:"getLeft",value:function(){return this.reduceClassifiers((function(e,t){var n=t.getLeft();return e>n?n:e}),1/0)}},{key:"getRight",value:function(){return this.reduceClassifiers((function(e,t){var n=t.getRight();return e<n?n:e}),-1/0)}},{key:"reduceClassifiers",value:function(e,t){var n,a=t,r=Object(T.a)(this.getChildren());try{for(r.s();!(n=r.n()).done;){var i=n.value;i instanceof Z&&(a=e(a,i))}}catch(s){r.e(s)}finally{r.f()}return a===t?0:a}}]),n}(K);!function(e){e[e.SOLID=0]="SOLID",e[e.DOTS=1]="DOTS",e[e.SMALL_DASHES=2]="SMALL_DASHES",e[e.LARGE_DASHES=3]="LARGE_DASHES",e[e.TIGHT_DASHES=4]="TIGHT_DASHES"}(V||(V={}));var q,Q=V;!function(e){e[e.NONE=0]="NONE",e[e.ARROW=1]="ARROW",e[e.TRIANGLE=2]="TRIANGLE",e[e.FILLED_TRIANGLE=3]="FILLED_TRIANGLE",e[e.DIAMOND=4]="DIAMOND",e[e.FILLED_DIAMOND=5]="FILLED_DIAMOND",e[e.CIRCLE=6]="CIRCLE",e[e.FILLED_CIRCLE=7]="FILLED_CIRCLE"}(q||(q={}));var ee=q,te=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(e,a,r,i){var s;return Object(d.a)(this,n),(s=t.call(this)).from=void 0,s.fromAnchor=void 0,s.fromTip=ee.NONE,s.to=void 0,s.toAnchor=void 0,s.toTip=ee.NONE,s.linePattern=Q.SOLID,s.from=e,s.fromAnchor=a,s.to=r,s.toAnchor=i,s}return Object(g.a)(n,[{key:"getX1",value:function(){return this.from.getLeft()+Y(this.fromAnchor)*this.from.getWidth()}},{key:"getY1",value:function(){return this.from.getTop()+B(this.fromAnchor)*this.from.getHeight()}},{key:"getX2",value:function(){return this.to.getLeft()+Y(this.toAnchor)*this.to.getWidth()}},{key:"getY2",value:function(){return this.to.getTop()+B(this.toAnchor)*this.to.getHeight()}},{key:"getAngle",value:function(){return Math.atan2(this.getY2()-this.getY1(),this.getX2()-this.getX1())}},{key:"render",value:function(e){e.renderRelationship(this)}}]),n}(K),ne=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(e){e.renderSeparator(this)}}]),n}(K),ae=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(e){e.renderStereotype(this)}}]),n}(K),re=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this)).text=void 0,a.text=e,a}return Object(g.a)(n,[{key:"render",value:function(e){e.renderText(this)}}]),n}(K),ie=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(e){e.renderTitle(this)}}]),n}(re),se=function(){function e(){Object(d.a)(this,e)}return Object(g.a)(e,[{key:"saveToString",value:function(e){var t="title: ".concat(e.title),n=e.xml,a=e.css;return this.joinSections(t,n,a)}},{key:"loadFromString",value:function(e){var t,n=this.splitSections(e,3),a=Object(o.a)(n,3),r=a[0],i=a[1],s=a[2];return{title:null!==(t=this.parseHeader(r).title)&&void 0!==t?t:"Untitled",xml:i,css:s}}},{key:"joinSections",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return e.trim()})).join("\n---\n")+"\n"}},{key:"splitSections",value:function(e,t){var n=e.split("\n---\n");if(n.length!==t)throw new Error("Expected ".concat(t," sections"));return n}},{key:"parseHeader",value:function(e){var t,n={},a=Object(T.a)(e.split(/\r\n|[\r\n]/));try{for(a.s();!(t=a.n()).done;){var r=t.value.split(/:\s*/,2),i=Object(o.a)(r,2),s=i[0],c=i[1];n[s]=c}}catch(u){a.e(u)}finally{a.f()}return n}}]),e}(),ce=n(24),oe=n(14),ue=function(){function e(){Object(d.a)(this,e),this.parser=void 0,this.serializer=void 0,this.elementMap=new Map,this.parser=new DOMParser,this.serializer=new XMLSerializer}return Object(g.a)(e,[{key:"deserialize",value:function(e){this.elementMap.clear();var t=this.parser.parseFromString(e,"text/xml"),n=this.parseElement(t.documentElement);return n instanceof J?n:new J}},{key:"serialize",value:function(e){if(this.hasElement(e)){var t=this.getElement(e);return this.serializer.serializeToString(t)}return""}},{key:"updateElement",value:function(e){if(this.hasElement(e)){var t=this.getElement(e);e instanceof Z&&this.setClassifier(t,e)}}},{key:"parseElement",value:function(e){if(this.elementMap.has(e))return this.elementMap.get(e);var t=this.doParseElement(e);return this.elementMap.set(e,t),t}},{key:"doParseElement",value:function(e){switch(e.tagName){case"Diagram":return this.parseDiagram(e);case"Classifier":return this.parseClassifier(Z,e);case"Relationship":return this.parseRelationship(te,e);case"Title":return this.parseTitle(e);case"Method":case"Text":return this.parseText(e);case"Separator":return new ne;case"Stereotype":return new ae}throw new Error("Unknown tag: ".concat(e.tagName))}},{key:"parseDiagram",value:function(e){var t=new J;return this.parseChildren(e,t),t}},{key:"parseClassifier",value:function(e,t){var n=new e(this.parseAnchorAttribute(t,"anchor"),this.parseIntAttribute(t,"x",0),this.parseIntAttribute(t,"y",0),this.parseIntAttribute(t,"width",200),this.parseIntAttribute(t,"height",120));return n.shape=this.parseEnumAttribute($,t,"shape",n.shape),this.parseChildren(t,n),n}},{key:"setClassifier",value:function(e,t){this.setIntAttribute(e,"x",0,t.getX()),this.setIntAttribute(e,"y",0,t.getY()),this.setIntAttribute(e,"width",200,t.getWidth()),this.setIntAttribute(e,"height",120,t.getHeight())}},{key:"parseRelationship",value:function(e,t){var n=new e(this.parseClassifierAttribute(t,"from"),this.parseAnchorAttribute(t,"fromAnchor"),this.parseClassifierAttribute(t,"to"),this.parseAnchorAttribute(t,"toAnchor"));return n.fromTip=this.parseTipAttribute(t,"fromTip",n.fromTip),n.toTip=this.parseTipAttribute(t,"toTip",n.toTip),n.linePattern=this.parseLinePatternAttribute(t,"linePattern",n.linePattern),n}},{key:"parseTitle",value:function(e){var t,n=null!==(t=e.textContent)&&void 0!==t?t:"";return new ie(n)}},{key:"parseText",value:function(e){var t,n=null!==(t=e.textContent)&&void 0!==t?t:"";return new re(n)}},{key:"parseChildren",value:function(e,t){var n,a=Object(T.a)(e.children);try{for(a.s();!(n=a.n()).done;){var r=n.value;try{t.addChild(this.parseElement(r))}catch(i){console.error(i)}}}catch(i){a.e(i)}finally{a.f()}}},{key:"parseClassifierAttribute",value:function(e,t){if(e.hasAttribute(t)){var n=e.getAttribute(t),a=e.ownerDocument.getElementById(n);if(null!==a){var r=this.parseElement(a);if(r instanceof Z)return r}}throw new Error("Invalid classifier: <".concat(e.tagName," ").concat(t,'="').concat(e.getAttribute(t),'" />'))}},{key:"parseAnchorAttribute",value:function(e,t){return this.parseEnumAttribute(G,e,t,G.S)}},{key:"parseTipAttribute",value:function(e,t,n){return this.parseEnumAttribute(ee,e,t,n)}},{key:"parseLinePatternAttribute",value:function(e,t,n){return this.parseEnumAttribute(Q,e,t,n)}},{key:"parseEnumAttribute",value:function(e,t,n,a){if(t.hasAttribute(n)){var r=t.getAttribute(n),i=Reflect.get(e,r.toUpperCase());if(void 0!==i)return i}return a}},{key:"parseIntAttribute",value:function(e,t,n){if(e.hasAttribute(t)){var a=parseInt(e.getAttribute(t),10);if(!Number.isNaN(a))return a}return n}},{key:"setIntAttribute",value:function(e,t,n,a){a!==n?e.setAttribute(t,String(a)):e.removeAttribute(t)}},{key:"hasElement",value:function(e){var t,n=Object(T.a)(this.elementMap.values());try{for(n.s();!(t=n.n()).done;){if(t.value===e)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"getElement",value:function(e){var t,n=Object(T.a)(this.elementMap);try{for(n.s();!(t=n.n()).done;){var a=Object(o.a)(t.value,2),r=a[0];if(a[1]===e)return r}}catch(i){n.e(i)}finally{n.f()}}}]),e}(),he=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toTip=ee.DIAMOND,e}return n}(te),le=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).linePattern=Q.DOTS,e}return n}(te),ve=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return n}(te),fe=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Class"}}]),n}(Z),de=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).shape=$.COMPONENT,e}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Component"}}]),n}(Z),ge=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toTip=ee.FILLED_DIAMOND,e}return n}(te),pe=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getTagName",value:function(){return"DataType"}}]),n}(Z),be=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toTip=ee.ARROW,e.linePattern=Q.TIGHT_DASHES,e}return n}(te),Oe=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toTip=ee.ARROW,e}return n}(te),ye=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Enumeration"}}]),n}(Z),me=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toTip=ee.TRIANGLE,e}return n}(te),je=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toTip=ee.TRIANGLE,e.linePattern=Q.TIGHT_DASHES,e}return n}(te),ke=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Interface"}}]),n}(Z),xe=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).shape=$.NOTE,e}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Note"}}]),n}(Z),Ee=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).shape=$.FOLDER,e}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Package"}}]),n}(Z),Se=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getTagName",value:function(){return"Primitive"}}]),n}(Z),we=new(function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"doParseElement",value:function(e){switch(e.tagName){case"Aggregation":return this.parseRelationship(he,e);case"Anchor":return this.parseRelationship(le,e);case"Association":return this.parseRelationship(ve,e);case"Class":return this.parseClassifier(fe,e);case"Component":return this.parseClassifier(de,e);case"Composition":return this.parseRelationship(ge,e);case"DataType":return this.parseClassifier(pe,e);case"Dependency":return this.parseRelationship(be,e);case"DirectedAssociation":return this.parseRelationship(Oe,e);case"Enumeration":return this.parseClassifier(ye,e);case"Generalization":return this.parseRelationship(me,e);case"Implementation":return this.parseRelationship(je,e);case"Interface":return this.parseClassifier(ke,e);case"Note":return this.parseClassifier(xe,e);case"Package":return this.parseClassifier(Ee,e);case"Primitive":return this.parseClassifier(Se,e);default:return Object(ce.a)(Object(oe.a)(n.prototype),"doParseElement",this).call(this,e)}}}]),n}(ue)),Te=new se,Ce=n(10);var Ae=function(e){var t=e.children;return Object(a.jsx)("div",{className:"container-fluid",children:t})};var Ne=function(){return Object(a.jsx)("li",{children:Object(a.jsx)("hr",{className:"dropdown-divider"})})},Re=n(12),Ie=n.n(Re);var Le=function(e){var t=e.onClick,n=e.shortcut,r=e.children;return F(n,(function(){null===t||void 0===t||t()})),Object(a.jsx)("li",{children:Object(a.jsxs)("button",{onClick:function(e){e.preventDefault(),null===t||void 0===t||t()},className:Ie()("btn","btn-link","dropdown-item"),children:[r,n&&Object(a.jsx)("span",{className:"text-muted float-end",children:n.replace("-"," ")})]})})};var De=function(e){var t=e.labelledBy,n=e.children;return Object(a.jsx)("ul",{className:"dropdown-menu","aria-labelledby":t,children:n})},He=n(23);var Pe=function(e){var t=e.id,n=e.className,i=e.children,s=Object(r.useRef)(null);return Object(a.jsx)("button",{id:t,ref:function(e){var t;null===e?(null===(t=s.current)||void 0===t||t.dispose(),s.current=null):s.current=new He.a(e)},"aria-expanded":"false","data-bs-toggle":"dropdown",className:Ie()("btn","btn-link","dropdown-toggle",n),children:i})},We=n(8),Me=n.n(We);n(32),n(33),n(34),n(35),n(36),n(38),n(39),n(40),n(41),n(42);function Fe(e,t){return(null===t||void 0===t?void 0:t())&&setTimeout((function(){e.state.completionActive||e.showHint({completeSingle:!1})}),100),Me.a.Pass}function Ge(e){return Fe(e,(function(){var t=e.getCursor();return"<"===e.getRange(Me.a.Pos(t.line,t.ch-1),t)}))}function Ye(e){return Fe(e,(function(){var t=e.getTokenAt(e.getCursor());return!!("string"!==t.type||/['"]/.test(t.string.charAt(t.string.length-1))&&1!==t.string.length)&&Me.a.innerMode(e.getMode(),t.state).state.tagName}))}var Be=function(e){var t=e.language,n=e.value,i=e.schema,s=e.onChange,c=Object(r.useRef)(s),o=Object(r.useRef)(null),u=Object(r.useRef)(null);return Object(r.useEffect)((function(){c.current=s}),[s]),Object(r.useEffect)((function(){var e="xml"===t?"xml":"text/x-scss",n={schemaInfo:i},a=Me.a.fromTextArea(o.current,{mode:e,lineNumbers:!0,theme:"nord",matchTags:!0,autocorrect:!0,extraKeys:{"'<'":Fe,"'/'":Ge,"' '":Ye,"'='":Ye,"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment"},hintOptions:n});return u.current=a,function(){a.toTextArea()}}),[t,i]),Object(r.useEffect)((function(){function e(){var e,t=u.current.getValue();t!==n&&(null===(e=c.current)||void 0===e||e.call(c,t))}return u.current.getValue()!==n&&u.current.setValue(n),u.current.on("change",e),function(){u.current.off("change",e)}}),[n]),Object(a.jsx)("textarea",{ref:o,defaultValue:n})},Xe=n(22);n(43);var ze=function(e){var t=e.name,n=e.color,r=void 0===n?O.DARK:n,i=e.size,s=void 0===i?20:i;return Object(a.jsx)("svg",{className:"Icon me-2",width:s,height:s,fill:r.toHexString(),children:Object(a.jsx)("use",{xlinkHref:"".concat(Xe.a,"#").concat(t)})})},_e=n.p+"static/media/logo.4da087a9.png";var Ue=function(e){var t=e.children;return Object(a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{gridArea:"menu"},children:Object(a.jsxs)(Ae,{children:[Object(a.jsxs)("span",{className:"navbar-brand",children:[Object(a.jsx)("img",{alt:"Logo",src:_e,height:32,width:32,className:"d-inline-block align-top"})," ","UML Editor"]}),Object(a.jsx)("ul",{className:"navbar-nav me-auto",children:t})]})})};var Ke=function(e){var t=e.active,n=void 0!==t&&t,r=e.title,i=e.children,s=P("Menu");return Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)(Pe,{id:s,className:Ie()("nav-link",{active:n}),children:r}),Object(a.jsx)(De,{labelledBy:s,children:i})]})};n(44);var Ve=function(e){var t=e.onFileChange;return Object(a.jsxs)(Le,{onClick:function(){var e;t({title:null!==(e=window.prompt("Choose a title for the new document:","Untitled"))&&void 0!==e?e:"Untitled",css:f,xml:v})},children:[Object(a.jsx)(ze,{name:"file-earmark-plus"})," New ..."]})};function $e(e){var t=e.clientX,n=e.clientY,a=e.currentTarget.getBoundingClientRect();return{x:t-a.x-a.width/2,y:n-a.y-a.height/2}}function Ze(e){return e.replace(/[^a-zA-Z_-]+/g,"-")}function Je(e,t){var n=document.createElement("a");n.download=e,n.href=t,n.click()}var qe=function(e){var t=e.onFileChange;return Object(a.jsxs)(Le,{onClick:function(){var e;(e=".uml",new Promise((function(t){var n=document.createElement("input");n.addEventListener("change",(function(){n.files.length>0&&t(n.files.item(0).text())}),{once:!0}),n.type="file",n.accept=e,n.multiple=!1,n.click()}))).then((function(e){var n=Te.loadFromString(e);t(n)}))},shortcut:"Ctrl-O",children:[Object(a.jsx)(ze,{name:"folder"})," Open"]})};var Qe=function(e){var t=e.file,n=e.onTitleChange;return Object(a.jsxs)(Le,{onClick:function(){var e=window.prompt("New document title",t.title);null!==e&&n(e)},children:[Object(a.jsx)(ze,{name:"pencil"}),' Rename "',t.title,'" ...']})};var et=function(e){var t=e.file;return Object(a.jsxs)(Le,{onClick:function(){var e=btoa(Te.saveToString(t)),n=new URL("data:text/x-uml;base64,".concat(e));Je("".concat(Ze(t.title),".uml"),n.toString())},shortcut:"Ctrl-S",children:[Object(a.jsx)(ze,{name:"cloud-download"})," Save"]})};var tt=function(e){var t=e.viewOptions,n=e.onViewOptionsChange,r=t.grid,i=r?"grid-3x3-gap-fill":"grid-3x3-gap";return Object(a.jsxs)(Le,{onClick:function(){n(Object(Ce.a)(Object(Ce.a)({},t),{},{grid:!r}))},shortcut:"Alt-G",children:[Object(a.jsx)(ze,{name:i})," Toggle Grid"]})},nt=function(){function e(t,n,a){Object(d.a)(this,e),this.renderer=void 0,this.context=void 0,this.canvas=void 0,this.renderer=t,this.context=n,this.canvas=a}return Object(g.a)(e,[{key:"renderClassifier",value:function(e){this.context.push(e.getTagName(),e.getWidth()-20,e.getHeight()-20),this.canvas.save(),this.canvas.translate(e.getLeft(),e.getTop()),this.applyStyle(e),this.drawShape(e),this.canvas.fill(),this.canvas.stroke(),this.canvas.clip(),this.canvas.translate(h,h);var t,n=Object(T.a)(e.getChildren());try{for(n.s();!(t=n.n()).done;){t.value.render(this.renderer)}}catch(a){n.e(a)}finally{n.f()}this.canvas.restore(),this.context.pop()}},{key:"isPointInClassifier",value:function(e,t,n){this.canvas.save(),this.canvas.translate(e.getLeft(),e.getTop()),this.drawShape(e);var a=this.canvas.isPointInPath(t,n);return this.canvas.restore(),a}},{key:"applyStyle",value:function(e){var t=this.context.getStyleProperties();this.canvas.lineWidth=t.getFloat("line-width",1.5),this.canvas.strokeStyle=t.getColor("stroke",O.DARK).toHexString();var n=t.getColor("fill",O.WHITE);e.isHovered()&&(n=n.mix(O.INFO,.25)),this.canvas.fillStyle=n.toHexString()}},{key:"drawShape",value:function(e){switch(this.canvas.beginPath(),e.shape){case $.RECTANGLE:return void this.drawRectangleShape(e);case $.ELLIPSE:return void this.drawEllipseShape(e);case $.FOLDER:return void this.drawFolderShape(e);case $.NOTE:return void this.drawNoteShape(e);case $.BOX:return void this.drawBoxShape(e);case $.FILE:return void this.drawFileShape(e);case $.COMPONENT:return void this.drawComponentShape(e)}}},{key:"drawBoxShape",value:function(e){var t=20,n=e.getWidth(),a=e.getHeight();this.canvas.rect(0,0,n,a),this.canvas.moveTo(0,0),this.canvas.lineTo(n,0),this.canvas.lineTo(n+t,-20),this.canvas.lineTo(t,-20),this.canvas.closePath(),this.canvas.moveTo(n,0),this.canvas.lineTo(n,a),this.canvas.lineTo(n+t,a-t),this.canvas.lineTo(n+t,-20),this.canvas.closePath()}},{key:"drawRectangleShape",value:function(e){this.canvas.rect(0,0,e.getWidth(),e.getHeight())}},{key:"drawEllipseShape",value:function(e){var t=e.getWidth(),n=e.getHeight();this.canvas.ellipse(t/2,n/2,t/2,n/2,0,0,2*Math.PI)}},{key:"drawFolderShape",value:function(e){this.canvas.rect(0,-20,80,20),this.canvas.rect(0,0,e.getWidth(),e.getHeight())}},{key:"drawNoteShape",value:function(e){var t=30,n=e.getWidth(),a=e.getHeight();this.canvas.moveTo(0,0),this.canvas.lineTo(0,a),this.canvas.lineTo(n-t,a),this.canvas.lineTo(n,a-t),this.canvas.lineTo(n,0),this.canvas.closePath(),this.canvas.moveTo(n-t,a),this.canvas.lineTo(n,a-t),this.canvas.lineTo(n-t,a-t),this.canvas.closePath()}},{key:"drawFileShape",value:function(e){var t=e.getWidth(),n=e.getHeight(),a=30;this.canvas.moveTo(a,0),this.canvas.lineTo(0,a),this.canvas.lineTo(0,n),this.canvas.lineTo(t,n),this.canvas.lineTo(t,0),this.canvas.closePath(),this.canvas.moveTo(a,0),this.canvas.lineTo(0,a),this.canvas.lineTo(a,a),this.canvas.closePath()}},{key:"drawComponentShape",value:function(e){var t=e.getWidth(),n=e.getHeight(),a=40,r=20,i=(n-60)/2;this.canvas.moveTo(0,0),this.canvas.lineTo(0,i),this.canvas.lineTo(20,i),this.canvas.lineTo(20,i+r),this.canvas.lineTo(0,i+r),this.canvas.lineTo(0,i+40),this.canvas.lineTo(20,i+40),this.canvas.lineTo(20,i+60),this.canvas.lineTo(0,i+60),this.canvas.lineTo(0,n),this.canvas.lineTo(t,n),this.canvas.lineTo(t,0),this.canvas.closePath(),this.canvas.rect(-20,i,a,r),this.canvas.rect(-20,i+40,a,r)}}]),e}(),at=function e(t,n,a){Object(d.a)(this,e),this.x=void 0,this.y=void 0,this.anchor=void 0,this.x=t,this.y=n,this.anchor=a},rt=function(){function e(t,n,a){Object(d.a)(this,e),this.width=void 0,this.height=void 0,this.context=void 0,this.style=void 0,this.width=[t],this.height=[n],this.context=[],this.style=a}return Object(g.a)(e,[{key:"push",value:function(e,t,n){this.context.unshift(e),this.width.unshift(null!==t&&void 0!==t?t:this.getWidth()),this.height.unshift(null!==n&&void 0!==n?n:this.getHeight())}},{key:"pop",value:function(){this.context.shift(),this.width.shift(),this.height.shift()}},{key:"getName",value:function(){return this.context[0]}},{key:"getWidth",value:function(){return this.width[0]}},{key:"getHeight",value:function(){return this.height[0]}},{key:"getStyleProperties",value:function(){return this.style.getProperties(Object(A.a)(this.context).reverse())}}]),e}(),it=function(){function e(t,n,a){Object(d.a)(this,e),this.context=void 0,this.canvas=void 0,this.classifierRenderer=void 0,this.translateX=void 0,this.translateY=void 0,this.context=new rt(t.width,t.height,n),this.translateX=a.translateX,this.translateY=a.translateY,this.canvas=t.getContext("2d"),this.classifierRenderer=new nt(this,this.context,this.canvas)}return Object(g.a)(e,[{key:"clear",value:function(){this.canvas.clearRect(0,0,this.context.getWidth(),this.context.getHeight())}},{key:"renderGrid",value:function(){var e=-Math.floor(this.translateX/u)*u,t=Math.floor(this.context.getWidth()-this.translateX/u)*u,n=-Math.floor(this.translateY/u)*u,a=Math.floor(this.context.getHeight()-this.translateY/u)*u;this.canvas.save(),this.canvas.translate(this.translateX,this.translateY),this.canvas.beginPath(),this.canvas.strokeStyle="#00000033";for(var r=e;r<t;r+=u)this.canvas.moveTo(r,-this.translateY),this.canvas.lineTo(r,this.context.getHeight()-this.translateY);for(var i=n;i<a;i+=u)this.canvas.moveTo(-this.translateX,i),this.canvas.lineTo(this.context.getWidth()-this.translateX,i);this.canvas.stroke(),this.canvas.restore()}},{key:"renderDiagram",value:function(e){this.canvas.save(),this.canvas.translate(this.translateX,this.translateY);var t,n=Object(T.a)(e.getChildren());try{for(n.s();!(t=n.n()).done;){t.value.render(this)}}catch(a){n.e(a)}finally{n.f()}this.renderHandles(e),this.canvas.restore()}},{key:"renderClassifier",value:function(e){this.classifierRenderer.renderClassifier(e)}},{key:"isPointInClassifier",value:function(e,t,n){return this.classifierRenderer.isPointInClassifier(e,t,n)}},{key:"renderRelationship",value:function(e){this.canvas.save(),this.canvas.beginPath(),this.canvas.moveTo(e.getX1(),e.getY1()),this.canvas.lineTo(e.getX2(),e.getY2()),this.applyRelationshipStyle(e),this.canvas.stroke(),this.drawFromTip(e),this.drawToTip(e),this.canvas.restore()}},{key:"applyRelationshipStyle",value:function(e){switch(this.canvas.lineWidth=1.5,this.canvas.strokeStyle="#212529",this.canvas.fillStyle="white",e.linePattern){case Q.SOLID:this.canvas.setLineDash([]);break;case Q.DOTS:this.canvas.setLineDash([2,2]);break;case Q.SMALL_DASHES:this.canvas.setLineDash([5,5]);break;case Q.LARGE_DASHES:this.canvas.setLineDash([10,10]);break;case Q.TIGHT_DASHES:this.canvas.setLineDash([15,5])}}},{key:"drawFromTip",value:function(e){e.fromTip!==ee.NONE&&(this.canvas.save(),this.canvas.setLineDash([]),this.canvas.translate(e.getX1(),e.getY1()),this.canvas.rotate(e.getAngle()+Math.PI),this.drawTip(e.fromTip),this.canvas.restore())}},{key:"drawToTip",value:function(e){e.toTip!==ee.NONE&&(this.canvas.save(),this.canvas.setLineDash([]),this.canvas.translate(e.getX2(),e.getY2()),this.canvas.rotate(e.getAngle()),this.drawTip(e.toTip),this.canvas.restore())}},{key:"renderText",value:function(e){this.context.push("Text"),this.drawText(e.text,"1.25rem","left"),this.canvas.translate(0,20),this.context.pop()}},{key:"renderTitle",value:function(e){this.context.push("Title"),this.drawText(e.text,"1.25rem","center"),this.canvas.translate(0,20),this.context.pop()}},{key:"renderSeparator",value:function(e){this.canvas.save(),this.canvas.beginPath(),this.canvas.moveTo(-10,h),this.canvas.lineTo(this.context.getWidth()+h,h),this.canvas.lineWidth=1.5,this.canvas.strokeStyle="#212529",this.canvas.stroke(),this.canvas.restore(),this.canvas.translate(0,20)}},{key:"renderStereotype",value:function(e){var t=this.context.getName();this.context.push("Stereotype"),this.drawText("\xab".concat(t,"\xbb"),"1rem","center"),this.canvas.translate(0,20),this.context.pop()}},{key:"drawText",value:function(e,t,n){var a=this.context.getStyleProperties(),r=a.getString("font-weight","normal"),i=a.getString("font-style","normal");this.canvas.save(),this.canvas.beginPath(),this.canvas.font="".concat(i," ").concat(r," ").concat(t," system-ui"),this.canvas.fillStyle=a.getColor("color",O.DARK).toHexString();var s=this.canvas.measureText(e),c="center"===n?(this.context.getWidth()-s.width)/2:0;this.canvas.fillText(e,c,s.fontBoundingBoxAscent-3),this.canvas.restore()}},{key:"drawTip",value:function(e){switch(e){case ee.ARROW:this.drawArrow();break;case ee.TRIANGLE:this.drawTriangle();break;case ee.FILLED_TRIANGLE:this.canvas.fillStyle=this.canvas.strokeStyle,this.drawTriangle();break;case ee.DIAMOND:this.drawDiamond();break;case ee.FILLED_DIAMOND:this.canvas.fillStyle=this.canvas.strokeStyle,this.drawDiamond();break;case ee.CIRCLE:this.drawCircle();break;case ee.FILLED_CIRCLE:this.canvas.fillStyle=this.canvas.strokeStyle,this.drawCircle()}}},{key:"drawArrow",value:function(){this.canvas.beginPath(),this.canvas.moveTo(0,0),this.canvas.lineTo(-20,8),this.canvas.moveTo(0,0),this.canvas.lineTo(-20,-8),this.canvas.closePath(),this.canvas.stroke()}},{key:"drawTriangle",value:function(){this.canvas.beginPath(),this.canvas.moveTo(0,0),this.canvas.lineTo(-20,10),this.canvas.lineTo(-20,-10),this.canvas.closePath(),this.canvas.fill(),this.canvas.stroke()}},{key:"drawDiamond",value:function(){this.canvas.beginPath(),this.canvas.moveTo(0,0),this.canvas.lineTo(-15,8),this.canvas.lineTo(-30,0),this.canvas.lineTo(-15,-8),this.canvas.closePath(),this.canvas.fill(),this.canvas.stroke()}},{key:"drawCircle",value:function(){this.canvas.beginPath(),this.canvas.ellipse(-10,0,10,10,0,0,2*Math.PI),this.canvas.closePath(),this.canvas.fill(),this.canvas.stroke()}},{key:"renderHandles",value:function(e){this.canvas.save(),this.canvas.fillStyle="white",this.canvas.strokeStyle="black",this.canvas.lineWidth=1;var t,n=Object(T.a)(this.getHandles(e));try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.x,i=a.y;this.renderHandleAtPoint(r,i)}}catch(s){n.e(s)}finally{n.f()}this.canvas.restore()}},{key:"getHandles",value:_.a.mark((function e(t){var n,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(T.a)(t.getChildren()),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=9;break}if(!((r=a.value)instanceof Z&&r.isSelected())){e.next=7;break}return e.delegateYield(this.getClassifierHandles(r),"t0",7);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(1),n.e(e.t1);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"renderHandleAtPoint",value:function(e,t){this.canvas.beginPath(),this.canvas.rect(e-l,t-l,9,9),this.canvas.fill(),this.canvas.stroke()}},{key:"findHandleForPoint",value:function(e,t,n){var a,r=Object(T.a)(this.getHandles(e));try{for(r.s();!(a=r.n()).done;){var i=a.value;if(this.isPointInHandle(i,t,n))return i}}catch(s){r.e(s)}finally{r.f()}}},{key:"isPointInHandle",value:function(e,t,n){return Math.abs(t-e.x)<=l&&Math.abs(n-e.y)<=l}},{key:"getClassifierHandles",value:_.a.mark((function e(t){var n,a,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getLeft(),a=t.getRight(),r=t.getTop(),i=t.getBottom(),e.next=6,new at(n,r,G.NW);case 6:return e.next=8,new at(t.getCenterX(),r,G.N);case 8:return e.next=10,new at(a,r,G.NE);case 10:return e.next=12,new at(n,t.getCenterY(),G.W);case 12:return e.next=14,new at(a,t.getCenterY(),G.E);case 14:return e.next=16,new at(n,i,G.SW);case 16:return e.next=18,new at(t.getCenterX(),i,G.S);case 18:return e.next=20,new at(a,i,G.SE);case 20:case"end":return e.stop()}}),e)}))}]),e}();var st=function(e){var t=e.file;return Object(a.jsxs)(Le,{onClick:function(){var e=document.createElement("canvas");e.width=t.model.getWidth()+20,e.height=t.model.getHeight()+20,new it(e,t.style,{translateX:10-t.model.getLeft(),translateY:10-t.model.getTop()}).renderDiagram(t.model);var n=e.toDataURL("image/png");Je("".concat(Ze(t.title),".png"),n)},shortcut:"Ctrl-E",children:[Object(a.jsx)(ze,{name:"image"})," As PNG"]})};var ct=function(e){var t=e.file,n=e.viewOptions,r=e.onFileChange,i=e.onViewOptionsChange;return Object(a.jsxs)(Ue,{children:[Object(a.jsxs)(Ke,{title:"File",children:[Object(a.jsx)(Ve,{onFileChange:r}),Object(a.jsx)(Ne,{}),Object(a.jsx)(qe,{onFileChange:r}),Object(a.jsx)(et,{file:t}),Object(a.jsx)(Ne,{}),Object(a.jsx)(Qe,{file:t,onTitleChange:function(e){return r(Object(Ce.a)(Object(Ce.a)({},t),{},{title:e}))}})]}),Object(a.jsx)(Ke,{title:"View",children:Object(a.jsx)(tt,{viewOptions:n,onViewOptionsChange:i})}),Object(a.jsx)(Ke,{title:"Export",children:Object(a.jsx)(st,{file:t})})]})};function ot(e,t){return new it(e,t,{translateX:e.width/2,translateY:e.height/2})}var ut=function(e){var t=e.viewOptions,n=e.diagram,i=e.style,s=e.onChange,c=Object(r.useRef)(t),o=Object(r.useRef)(null),h=Object(r.useRef)(null),l=Object(r.useRef)(null),v=Object(r.useRef)(null),f=Object(r.useRef)(null);function d(e){h.current.style.cursor=e}function g(e,t){var a,r,i,c,o=n.find((function(e){return e.isSelected()}));if(o instanceof Z){var h=(i={x:e,y:t},c=l.current,a={x:i.x-c.x,y:i.y-c.y},r=u,{x:Math.round(a.x/r)*r,y:Math.round(a.y/r)*r}),d=h.x,g=h.y;if(f.current===o)return o.setLeft(v.current.x+d),o.setTop(v.current.y+g),void(null===s||void 0===s||s(o));f.current instanceof at&&function(e,t,n,a){t.anchor!==G.W&&t.anchor!==G.NW&&t.anchor!==G.SW||(e.setWidth(v.current.width-n),e.setLeft(v.current.x+n),null===s||void 0===s||s(e)),t.anchor!==G.E&&t.anchor!==G.NE&&t.anchor!==G.SE||(e.setWidth(v.current.width+n),e.setLeft(v.current.x),null===s||void 0===s||s(e)),t.anchor!==G.N&&t.anchor!==G.NW&&t.anchor!==G.NE||(e.setHeight(v.current.height-a),e.setTop(v.current.y+a),null===s||void 0===s||s(e)),t.anchor!==G.S&&t.anchor!==G.SW&&t.anchor!==G.SE||(e.setHeight(v.current.height+a),e.setTop(v.current.y),null===s||void 0===s||s(e))}(o,f.current,d,g)}}return Object(r.useEffect)((function(){c.current=t})),Object(r.useEffect)((function(){function e(){var e=o.current.getBoundingClientRect();h.current.width=Math.trunc(e.width),h.current.height=Math.trunc(e.height);var t=ot(h.current,i);t.clear(),c.current.grid&&t.renderGrid(),t.renderDiagram(n)}return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[t,n,i]),Object(a.jsx)("div",{ref:o,className:"Canvas",style:{backgroundColor:"hsl(220 9% 92% / 1)",gridArea:"canvas"},children:Object(a.jsx)("canvas",{ref:h,onMouseMove:function(e){var t=ot(h.current,i),a=$e(e),r=a.x,s=a.y;if(1&e.buttons)return g(r,s),t.clear(),c.current.grid&&t.renderGrid(),void t.renderDiagram(n);var o,u=Object(T.a)(n);try{for(u.s();!(o=u.n()).done;){o.value.setHovered(!1)}}catch(b){u.e(b)}finally{u.f()}var l=t.findHandleForPoint(n,r,s);if(void 0!==l)d("".concat(G[l.anchor].toLowerCase(),"-resize"));else{d("default");var v,f=Object(T.a)(n);try{for(f.s();!(v=f.n()).done;){var p=v.value;if(p instanceof Z)if(t.isPointInClassifier(p,r,s)){p.setHovered(!0);break}}}catch(b){f.e(b)}finally{f.f()}}t.clear(),c.current.grid&&t.renderGrid(),t.renderDiagram(n)},onMouseDown:function(e){var t=ot(h.current,i),a=$e(e);!function(e,t,a){var r=n.find((function(e){return e.isSelected()})),i=e.findHandleForPoint(n,t,a);if(void 0!==i&&r instanceof Z)return v.current=r.getRectangle(),l.current={x:t,y:a},void(f.current=i);null===r||void 0===r||r.setSelected(!1);var s,c=Object(T.a)(n);try{for(c.s();!(s=c.n()).done;){var o=s.value;if(o instanceof Z&&e.isPointInClassifier(o,t,a))return o.setSelected(!0),v.current=o.getRectangle(),l.current={x:t,y:a},void(f.current=o)}}catch(u){c.e(u)}finally{c.f()}}(t,a.x,a.y),t.clear(),c.current.grid&&t.renderGrid(),t.renderDiagram(n)},onMouseUp:function(){v.current=null,l.current=null,f.current=null}})})};var ht=function(e){var t=e.css,n=e.onChange;return Object(a.jsx)("div",{className:"CSSEditor",style:{gridArea:"css",position:"relative"},children:Object(a.jsx)(Be,{language:"css",value:t,onChange:n})})},lt=Object.keys(G).filter((function(e){return e.match(/^\D+$/)})).map((function(e){return e.toLowerCase()})),vt=Object.keys($).filter((function(e){return e.match(/^\D+$/)})).map((function(e){return e.toLowerCase()})),ft=Object.keys(ee).filter((function(e){return e.match(/^\D+$/)})).map((function(e){return e.toLowerCase()})),dt={children:["Title","Separator","Method","Stereotype"],attrs:{x:null,y:null,width:null,height:null,anchor:lt,shape:vt}},gt={attrs:{from:null,fromTip:ft,to:null,toTip:ft,linePattern:Object.keys(Q).filter((function(e){return e.match(/^\D+$/)})).map((function(e){return e.toLowerCase()}))}},pt={Class:dt,Classifier:dt,Component:dt,DataType:dt,Enumeration:dt,Interface:dt,Note:dt,Object:dt,Package:dt,Primitive:dt},bt={Aggregation:gt,Anchor:gt,Association:gt,Composition:gt,Dependency:gt,DirectedAssociation:gt,Generalization:gt,Implementation:gt,Relationship:gt},Ot=Object(Ce.a)(Object(Ce.a)({"!top":["Diagram"],"!attrs":{id:null,class:null},Diagram:{children:[].concat(Object(A.a)(Object.keys(pt)),Object(A.a)(Object.keys(bt)))}},pt),bt);var yt=function(e){var t=e.xml,n=e.onChange;return Object(a.jsx)("div",{className:"XMLEditor",style:{gridArea:"xml",position:"relative"},children:Object(a.jsx)(Be,{language:"xml",value:t,schema:Ot,onChange:n})})};n(45);var mt=function(){var e=Object(r.useState)({grid:!1}),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)((function(){return new J})),c=Object(o.a)(s,2),u=c[0],h=c[1],l=Object(r.useState)((function(){return new R})),d=Object(o.a)(l,2),g=d[0],p=d[1],b=Object(r.useState)("Untitled"),O=Object(o.a)(b,2),y=O[0],m=O[1],j=Object(r.useState)(""),k=Object(o.a)(j,2),x=k[0],E=k[1],S=Object(r.useState)(""),w=Object(o.a)(S,2),T=w[0],C=w[1];return H("".concat(y," - UML Editor")),Object(r.useEffect)((function(){var e=we.deserialize(v),t=D.parseFromString(f);h(e),p(t),E(v),C(f)}),[]),Object(a.jsxs)("div",{className:"App bg-secondary",children:[Object(a.jsx)(ct,{file:{title:y,model:u,style:g,xml:x,css:T},viewOptions:n,onFileChange:function(e){var t=we.deserialize(e.xml),n=D.parseFromString(e.css);m(e.title),C(e.css),E(e.xml),h(t),p(n)},onViewOptionsChange:i}),Object(a.jsx)(yt,{xml:x,onChange:function(e){var t=we.deserialize(e);h(t),E(e)}}),Object(a.jsx)(ht,{css:T,onChange:function(e){var t=D.parseFromString(e);p(t),C(e)}}),Object(a.jsx)(ut,{viewOptions:n,diagram:u,style:g,onChange:function(e){we.updateElement(e);var t=we.serialize(u);E(t)}})]})},jt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};n(46);c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(mt,{})}),document.getElementById("root")),jt()}},[[47,1,2]]]);
//# sourceMappingURL=main.06211745.chunk.js.map